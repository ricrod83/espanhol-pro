<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Espa√±olPro</title>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Work+Sans:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #FF6B35;
            --secondary: #F7931E;
            --accent: #FEC601;
            --dark: #1A1A2E;
            --darker: #0F0F1E;
            --light: #FFFFFF;
            --gray: #9E9E9E;
            --success: #4CAF50;
            --error: #F44336;
            --gradient-main: linear-gradient(135deg, #FF6B35 0%, #F7931E 50%, #FEC601 100%);
        }

        body {
            font-family: 'Work Sans', sans-serif;
            background: var(--darker);
            color: var(--light);
            overflow-x: hidden;
        }

        /* Header */
        header {
            background: rgba(26, 26, 46, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 2px solid var(--primary);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        nav {
            max-width: 1600px;
            margin: 0 auto;
            padding: 1.2rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-family: 'Bebas Neue', cursive;
            font-size: 2rem;
            background: var(--gradient-main);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 2px;
        }

        .nav-menu {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .nav-link {
            color: var(--gray);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
            cursor: pointer;
        }

        .nav-link:hover, .nav-link.active {
            color: var(--light);
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .streak {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(255, 193, 7, 0.1);
            border-radius: 20px;
            font-weight: 600;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--gradient-main);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            cursor: pointer;
        }

        /* Main Container */
        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Welcome Section */
        .welcome {
            background: var(--dark);
            border-radius: 24px;
            padding: 3rem;
            margin-bottom: 3rem;
            border: 2px solid rgba(255, 107, 53, 0.2);
            background: 
                linear-gradient(135deg, var(--dark) 0%, rgba(255, 107, 53, 0.05) 100%);
        }

        .welcome h1 {
            font-family: 'Bebas Neue', cursive;
            font-size: 3rem;
            margin-bottom: 0.5rem;
            letter-spacing: 2px;
        }

        .welcome p {
            color: var(--gray);
            font-size: 1.1rem;
        }

        /* Progress Dashboard */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .stat-card {
            background: var(--darker);
            padding: 1.5rem;
            border-radius: 16px;
            border: 2px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 800;
            background: var(--gradient-main);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            color: var(--gray);
            margin-top: 0.5rem;
            font-size: 0.9rem;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            margin-top: 1rem;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient-main);
            border-radius: 10px;
            transition: width 1s ease;
        }

        /* Level Selector */
        .level-selector {
            display: flex;
            gap: 1rem;
            margin: 3rem 0;
            overflow-x: auto;
            padding: 0.5rem 0;
        }

        .level-btn {
            padding: 1rem 2rem;
            background: var(--dark);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: var(--light);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .level-btn:hover {
            border-color: var(--primary);
        }

        .level-btn.active {
            background: var(--gradient-main);
            color: var(--darker);
            border-color: transparent;
        }

        /* Modules Grid */
        .section-title {
            font-family: 'Bebas Neue', cursive;
            font-size: 2.5rem;
            margin: 3rem 0 2rem;
            letter-spacing: 2px;
        }

        .modules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 2rem;
        }

        .module-card {
            background: var(--dark);
            border-radius: 20px;
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s;
            cursor: pointer;
        }

        .module-card:hover {
            transform: translateY(-10px);
            border-color: var(--primary);
            box-shadow: 0 20px 60px rgba(255, 107, 53, 0.3);
        }

        .module-header {
            padding: 2rem;
            background: var(--gradient-main);
            position: relative;
        }

        .module-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .module-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--darker);
            margin-bottom: 0.5rem;
        }

        .module-subtitle {
            color: rgba(15, 15, 30, 0.8);
            font-size: 0.95rem;
        }

        .module-body {
            padding: 1.5rem;
        }

        .module-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .module-stat {
            text-align: center;
        }

        .module-stat-value {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--accent);
        }

        .module-stat-label {
            font-size: 0.75rem;
            color: var(--gray);
        }

        .start-btn {
            width: 100%;
            padding: 1rem;
            background: var(--gradient-main);
            border: none;
            border-radius: 12px;
            color: var(--darker);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 1rem;
        }

        .start-btn:hover {
            transform: scale(1.02);
            box-shadow: 0 10px 30px rgba(255, 107, 53, 0.4);
        }

        /* Exercise Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 2000;
            overflow-y: auto;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .modal-content {
            background: var(--dark);
            border-radius: 24px;
            max-width: 900px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-header {
            padding: 2rem;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
            position: sticky;
            top: 0;
            background: var(--dark);
            z-index: 10;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-family: 'Bebas Neue', cursive;
            font-size: 2rem;
            letter-spacing: 1px;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 2rem;
            color: var(--light);
            cursor: pointer;
            transition: color 0.3s;
        }

        .close-btn:hover {
            color: var(--primary);
        }

        .exercise-container {
            padding: 2rem;
        }

        .exercise-progress {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
        }

        .question {
            margin-bottom: 3rem;
        }

        .question-number {
            color: var(--primary);
            font-weight: 700;
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }

        .question-text {
            font-size: 1.4rem;
            line-height: 1.6;
            margin-bottom: 2rem;
            font-weight: 500;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .option {
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid transparent;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .option-letter {
            width: 40px;
            height: 40px;
            background: var(--darker);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            flex-shrink: 0;
        }

        .option:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--primary);
        }

        .option.selected {
            border-color: var(--accent);
            background: rgba(254, 198, 1, 0.1);
        }

        .option.correct {
            border-color: var(--success);
            background: rgba(76, 175, 80, 0.1);
        }

        .option.incorrect {
            border-color: var(--error);
            background: rgba(244, 67, 54, 0.1);
        }

        .submit-answer {
            width: 100%;
            padding: 1.2rem;
            background: var(--gradient-main);
            border: none;
            border-radius: 12px;
            color: var(--darker);
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            margin-top: 2rem;
            transition: all 0.3s;
        }

        .submit-answer:hover {
            transform: scale(1.02);
        }

        .submit-answer:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .feedback {
            margin-top: 2rem;
            padding: 1.5rem;
            border-radius: 12px;
            display: none;
        }

        .feedback.show {
            display: block;
            animation: slideUp 0.3s;
        }

        .feedback.correct {
            background: rgba(76, 175, 80, 0.1);
            border: 2px solid var(--success);
        }

        .feedback.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border: 2px solid var(--error);
        }

        .feedback strong {
            display: block;
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .next-btn {
            margin-top: 1rem;
            padding: 1rem 2rem;
            background: var(--gradient-main);
            border: none;
            border-radius: 8px;
            color: var(--darker);
            font-weight: 700;
            cursor: pointer;
        }

        /* Achievement */
        .achievement {
            position: fixed;
            top: 100px;
            right: -400px;
            background: var(--gradient-main);
            padding: 1.5rem;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(255, 107, 53, 0.5);
            transition: right 0.5s;
            z-index: 3000;
            max-width: 350px;
            color: var(--darker);
        }

        .achievement.show {
            right: 20px;
        }

        .achievement-title {
            font-weight: 700;
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
        }

        /* Tab Content */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Responsive */
        @media (max-width: 968px) {
            .modules-grid {
                grid-template-columns: 1fr;
            }

            .level-selector {
                flex-wrap: nowrap;
            }

            .nav-menu {
                display: none;
            }
        }

        /* Chat IA Styles */
        .chat-container {
            background: var(--dark);
            border-radius: 24px;
            border: 2px solid rgba(255, 107, 53, 0.2);
            overflow: hidden;
            max-width: 1200px;
            margin: 2rem auto;
        }

        .chat-header {
            padding: 1.5rem 2rem;
            background: var(--darker);
            border-bottom: 2px solid rgba(255, 255, 255, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-status {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            font-weight: 600;
        }

        .status-dot {
            width: 10px;
            height: 10px;
            background: var(--success);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .btn-clear-chat {
            padding: 0.6rem 1.2rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: var(--light);
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-clear-chat:hover {
            background: rgba(255, 107, 53, 0.1);
            border-color: var(--primary);
        }

        .chat-messages {
            height: 500px;
            overflow-y: auto;
            padding: 2rem;
            background: var(--darker);
        }

        .message {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            animation: slideUp 0.3s;
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: var(--gradient-main);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .message.user .message-avatar {
            background: var(--darker);
            border: 2px solid var(--primary);
        }

        .message-content {
            background: rgba(255, 255, 255, 0.05);
            padding: 1.2rem;
            border-radius: 12px;
            max-width: 70%;
        }

        .message.user .message-content {
            background: var(--gradient-main);
            color: var(--darker);
        }

        .message-content strong {
            display: block;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .message-content p {
            line-height: 1.6;
            margin: 0;
        }

        .message-suggestions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .message-suggestions button {
            padding: 0.5rem 1rem;
            background: rgba(255, 107, 53, 0.1);
            border: 1px solid var(--primary);
            border-radius: 20px;
            color: var(--light);
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .message-suggestions button:hover {
            background: var(--primary);
            color: var(--darker);
        }

        .chat-input-area {
            padding: 1.5rem 2rem;
            background: var(--dark);
            border-top: 2px solid rgba(255, 255, 255, 0.05);
            display: flex;
            gap: 1rem;
        }

        .chat-input {
            flex: 1;
            padding: 1rem 1.5rem;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: var(--light);
            font-size: 1rem;
            transition: all 0.3s;
        }

        .chat-input:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.08);
        }

        .btn-send {
            padding: 1rem 2.5rem;
            background: var(--gradient-main);
            border: none;
            border-radius: 12px;
            color: var(--darker);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-send:hover {
            transform: scale(1.05);
        }

        .chat-info {
            padding: 1rem 2rem;
            background: rgba(255, 193, 7, 0.1);
            border-top: 1px solid rgba(255, 193, 7, 0.3);
            font-size: 0.9rem;
            color: var(--gray);
        }

        .chat-info a {
            color: var(--accent);
            text-decoration: underline;
            cursor: pointer;
        }

        /* Videos Styles */
        .video-filters {
            display: flex;
            gap: 1rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 0.8rem 1.5rem;
            background: var(--dark);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: var(--light);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .filter-btn:hover, .filter-btn.active {
            background: var(--gradient-main);
            color: var(--darker);
            border-color: transparent;
        }

        .videos-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 2rem;
        }

        .video-card {
            background: var(--dark);
            border-radius: 16px;
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s;
            cursor: pointer;
        }

        .video-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
        }

        .video-thumbnail {
            width: 100%;
            aspect-ratio: 16/9;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .video-play-icon {
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: var(--primary);
        }

        .video-duration {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.8);
            padding: 0.3rem 0.6rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .video-info {
            padding: 1.5rem;
        }

        .video-title {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            line-height: 1.4;
        }

        .video-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
            color: var(--gray);
            font-size: 0.85rem;
        }

        .video-level {
            background: rgba(255, 107, 53, 0.2);
            padding: 0.3rem 0.8rem;
            border-radius: 12px;
            color: var(--accent);
            font-weight: 600;
        }

        /* Audio Exercises */
        .audio-exercises-container {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .audio-exercise {
            background: var(--dark);
            border-radius: 20px;
            padding: 2rem;
            border: 2px solid rgba(255, 255, 255, 0.05);
        }

        .audio-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .audio-title {
            font-size: 1.3rem;
            font-weight: 700;
        }

        .audio-level-badge {
            background: var(--gradient-main);
            color: var(--darker);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.9rem;
        }

        .audio-player {
            background: var(--darker);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        .audio-controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .audio-btn {
            width: 60px;
            height: 60px;
            background: var(--gradient-main);
            border: none;
            border-radius: 50%;
            color: var(--darker);
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .audio-btn:hover {
            transform: scale(1.1);
        }

        .audio-text {
            background: rgba(255, 255, 255, 0.05);
            padding: 1.5rem;
            border-radius: 12px;
            margin-top: 1rem;
            font-style: italic;
            color: var(--gray);
            display: none;
        }

        .audio-text.show {
            display: block;
        }

        .audio-questions {
            margin-top: 2rem;
        }

        .audio-question {
            margin-bottom: 2rem;
        }

        .audio-question-text {
            font-weight: 600;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <div class="logo" onclick="window.location.href='index.html'" style="cursor: pointer;">ESPA√ëOLPRO</div>
            <div class="nav-menu">
                <a class="nav-link" onclick="window.location.href='index.html'">üè† Home</a>
                <a class="nav-link active" onclick="showTab('learning')">Aprendizado</a>
                <a class="nav-link" onclick="showTab('chat')">Chat IA</a>
                <a class="nav-link" onclick="showTab('videos')">Videoaulas</a>
                <a class="nav-link" onclick="showTab('audio')">Listening</a>
                <a class="nav-link" onclick="showTab('progress')">Progresso</a>
                <a class="nav-link" onclick="showTab('certificate')">Certificados</a>
            </div>
            <div class="user-menu">
                <div class="streak">
                    <span>üî•</span>
                    <span id="streak-count">0</span> dias
                </div>
                <div class="user-avatar">BR</div>
            </div>
        </nav>
    </header>

    <main class="container">
        <!-- Learning Tab -->
        <div id="learning-tab" class="tab-content active">
            <div class="welcome">
                <h1>Bem-vindo de volta! üëã</h1>
                <p>Continue sua jornada para dominar o espanhol</p>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="total-xp">0</div>
                        <div class="stat-label">XP Total</div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="lessons-completed">0</div>
                        <div class="stat-label">Li√ß√µes Completadas</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="vocab-count">0</div>
                        <div class="stat-label">Palavras Aprendidas</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="current-level">A2</div>
                        <div class="stat-label">N√≠vel Atual</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="level-progress" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Acesso R√°pido -->
            <div style="margin: 2rem 0;">
                <h2 style="font-family: 'Bebas Neue', cursive; font-size: 2rem; letter-spacing: 2px; margin-bottom: 1.5rem;">
                    Ferramentas de Estudo üõ†Ô∏è
                </h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1.5rem;">

                    <div onclick="window.location.href='flashcards.html'" style="background: linear-gradient(135deg, #1A1A2E, #2a1a3e); border: 2px solid #FF6B35; border-radius: 20px; padding: 2rem; text-align: center; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 30px rgba(255,107,53,0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">üóÇÔ∏è</div>
                        <div style="font-weight: 700; font-size: 1.1rem; margin-bottom: 0.5rem;">Flashcards</div>
                        <div style="color: #9E9E9E; font-size: 0.9rem;">Revis√£o espa√ßada</div>
                        <div style="margin-top: 1rem; background: linear-gradient(135deg, #FF6B35, #FEC601); color: #0F0F1E; padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.85rem; font-weight: 700;">40 cards ‚Üí</div>
                    </div>

                    <div onclick="window.location.href='historias.html'" style="background: linear-gradient(135deg, #1A1A2E, #1a2e2a); border: 2px solid #4CAF50; border-radius: 20px; padding: 2rem; text-align: center; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 30px rgba(76,175,80,0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">üìñ</div>
                        <div style="font-weight: 700; font-size: 1.1rem; margin-bottom: 0.5rem;">Hist√≥rias</div>
                        <div style="color: #9E9E9E; font-size: 0.9rem;">Leitura interativa</div>
                        <div style="margin-top: 1rem; background: #4CAF50; color: white; padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.85rem; font-weight: 700;">6 hist√≥rias ‚Üí</div>
                    </div>

                    <div onclick="window.location.href='preencher-lacunas.html'" style="background: linear-gradient(135deg, #1A1A2E, #1a2a3e); border: 2px solid #2196F3; border-radius: 20px; padding: 2rem; text-align: center; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 30px rgba(33,150,243,0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">üìù</div>
                        <div style="font-weight: 700; font-size: 1.1rem; margin-bottom: 0.5rem;">Preencher Lacunas</div>
                        <div style="color: #9E9E9E; font-size: 0.9rem;">Complete as frases</div>
                        <div style="margin-top: 1rem; background: #2196F3; color: white; padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.85rem; font-weight: 700;">60 exerc√≠cios ‚Üí</div>
                    </div>

                    <div onclick="showTab('chat')" style="background: linear-gradient(135deg, #1A1A2E, #2e2a1a); border: 2px solid #FEC601; border-radius: 20px; padding: 2rem; text-align: center; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 30px rgba(254,198,1,0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">ü§ñ</div>
                        <div style="font-weight: 700; font-size: 1.1rem; margin-bottom: 0.5rem;">Chat IA</div>
                        <div style="color: #9E9E9E; font-size: 0.9rem;">Pratique conversa√ß√£o</div>
                        <div style="margin-top: 1rem; background: #FEC601; color: #0F0F1E; padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.85rem; font-weight: 700;">Conversar ‚Üí</div>
                    </div>

                    <div onclick="window.location.href='simulado-dele.html'" style="background: linear-gradient(135deg, #1A1A2E, #2e1a2e); border: 2px solid #9C27B0; border-radius: 20px; padding: 2rem; text-align: center; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 30px rgba(156,39,176,0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">üéì</div>
                        <div style="font-weight: 700; font-size: 1.1rem; margin-bottom: 0.5rem;">Simulados DELE</div>
                        <div style="color: #9E9E9E; font-size: 0.9rem;">Certificado oficial</div>
                        <div style="margin-top: 1rem; background: #9C27B0; color: white; padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.85rem; font-weight: 700;">3 n√≠veis ‚Üí</div>
                    </div>

                    <div onclick="showTab('audio')" style="background: linear-gradient(135deg, #1A1A2E, #2e1a2a); border: 2px solid #9C27B0; border-radius: 20px; padding: 2rem; text-align: center; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 30px rgba(156,39,176,0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">üéß</div>
                        <div style="font-weight: 700; font-size: 1.1rem; margin-bottom: 0.5rem;">Listening</div>
                        <div style="color: #9E9E9E; font-size: 0.9rem;">Compreens√£o auditiva</div>
                        <div style="margin-top: 1rem; background: #9C27B0; color: white; padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.85rem; font-weight: 700;">40 √°udios ‚Üí</div>
                    </div>

                    <div onclick="showTab('videos')" style="background: linear-gradient(135deg, #1A1A2E, #2e1a1a); border: 2px solid #F44336; border-radius: 20px; padding: 2rem; text-align: center; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 30px rgba(244,67,54,0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">üé•</div>
                        <div style="font-weight: 700; font-size: 1.1rem; margin-bottom: 0.5rem;">Videoaulas</div>
                        <div style="color: #9E9E9E; font-size: 0.9rem;">Aprenda com v√≠deos</div>
                        <div style="margin-top: 1rem; background: #F44336; color: white; padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.85rem; font-weight: 700;">32 v√≠deos ‚Üí</div>
                    </div>

                </div>
            </div>

            <hr style="border: 1px solid rgba(255,255,255,0.05); margin: 2rem 0;">

            <!-- Level Selector -->
            <div class="level-selector">
                <button class="level-btn active" onclick="selectLevel('A2')">
                    üìò N√≠vel A2 - B√°sico
                </button>
                <button class="level-btn" onclick="selectLevel('B1')">
                    üìó N√≠vel B1 - Intermedi√°rio
                </button>
                <button class="level-btn" onclick="selectLevel('B1_plus')">
                    üìô N√≠vel B1+ - Intermedi√°rio Avan√ßado
                </button>
                <button class="level-btn" onclick="selectLevel('B2')">
                    üìï N√≠vel B2 - Avan√ßado
                </button>
            </div>

            <!-- Modules Container -->
            <div id="modules-container"></div>
        </div>

        <!-- Progress Tab -->
        <div id="progress-tab" class="tab-content">
            <div class="welcome">
                <h1>Seu Progresso üìä</h1>
                <p>Acompanhe sua evolu√ß√£o em cada n√≠vel</p>
            </div>
            <!-- Progress charts will be added here -->
        </div>

        <!-- Certificate Tab -->
        <div id="certificate-tab" class="tab-content">
            <div class="welcome">
                <h1>Seus Certificados üìú</h1>
                <p>Certificados de conclus√£o para adicionar no LinkedIn</p>
            </div>
            <!-- Certificates will be shown here -->
        </div>

        <!-- Chat IA Tab -->
        <div id="chat-tab" class="tab-content">
            <div class="welcome">
                <h1>Pr√°tica com IA ü§ñ</h1>
                <p>Converse em espanhol e receba corre√ß√µes em tempo real</p>
            </div>

            <div class="chat-container">
                <div class="chat-header">
                    <div class="chat-status">
                        <span class="status-dot"></span>
                        <span>IA Professor Online</span>
                    </div>
                    <button class="btn-clear-chat" onclick="clearChat()">Limpar Conversa</button>
                </div>
                <div class="chat-messages" id="chat-messages">
                    <div class="message ai">
                        <div class="message-avatar">ü§ñ</div>
                        <div class="message-content">
                            <strong>Profesor IA</strong>
                            <p>¬°Hola! Soy tu profesor de espa√±ol. Podemos practicar conversaci√≥n sobre cualquier tema que te interese. ¬øDe qu√© te gustar√≠a hablar hoy?</p>
                            <div class="message-suggestions">
                                <button onclick="sendSuggestion('Quiero practicar vocabulario de negocios')">üíº Negocios</button>
                                <button onclick="sendSuggestion('Vamos a hablar sobre viajes')">‚úàÔ∏è Viajes</button>
                                <button onclick="sendSuggestion('Ay√∫dame con el subjuntivo')">üìö Gram√°tica</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="chat-input-area">
                    <input 
                        type="text" 
                        id="chat-input" 
                        class="chat-input" 
                        placeholder="Escribe en espa√±ol..."
                        onkeypress="if(event.key==='Enter') sendChatMessage()"
                    >
                    <button class="btn-send" onclick="sendChatMessage()">
                        <span>Enviar</span>
                    </button>
                </div>
                <div class="chat-info">
                    üí° <strong>Dica:</strong> Configure sua API Key do Claude no c√≥digo para ativar o chat completo. 
                    <a href="#" onclick="showAPIInstructions()">Como configurar?</a>
                </div>
            </div>
        </div>

        <!-- Videos Tab -->
        <div id="videos-tab" class="tab-content">
            <div class="welcome">
                <h1>Videoaulas üé•</h1>
                <p>Aprenda com v√≠deos explicativos organizados por n√≠vel e tema</p>
            </div>

            <div class="video-filters">
                <div style="margin-bottom: 1rem;">
                    <strong style="margin-right: 1rem;">Por N√≠vel:</strong>
                    <button class="filter-btn active" onclick="filterVideosByLevel('all')">Todos</button>
                    <button class="filter-btn" onclick="filterVideosByLevel('A2')">A2 - B√°sico</button>
                    <button class="filter-btn" onclick="filterVideosByLevel('B1')">B1 - Intermedi√°rio</button>
                    <button class="filter-btn" onclick="filterVideosByLevel('B1_plus')">B1+ - Inter. Avan√ßado</button>
                    <button class="filter-btn" onclick="filterVideosByLevel('B2')">B2 - Avan√ßado</button>
                </div>
                <div>
                    <strong style="margin-right: 1rem;">Por Tema:</strong>
                    <button class="filter-btn active" onclick="filterVideosByCategory('all')">Todos</button>
                    <button class="filter-btn" onclick="filterVideosByCategory('gramatica')">Gram√°tica</button>
                    <button class="filter-btn" onclick="filterVideosByCategory('vocabulario')">Vocabul√°rio</button>
                    <button class="filter-btn" onclick="filterVideosByCategory('pronuncia')">Pron√∫ncia</button>
                    <button class="filter-btn" onclick="filterVideosByCategory('cultura')">Cultura</button>
                </div>
            </div>

            <div class="videos-grid" id="videos-grid">
                <!-- Videos will be loaded here -->
            </div>
        </div>

        <!-- Audio Tab -->
        <div id="audio-tab" class="tab-content">
            <div class="welcome">
                <h1>Exerc√≠cios de Listening üéß</h1>
                <p>Pratique sua compreens√£o auditiva - 40 exerc√≠cios organizados por n√≠vel</p>
            </div>

            <div class="video-filters" style="margin-bottom: 2rem;">
                <strong style="margin-right: 1rem;">Filtrar por N√≠vel:</strong>
                <button class="filter-btn active" onclick="filterAudioByLevel('all')">Todos (40)</button>
                <button class="filter-btn" onclick="filterAudioByLevel('A2')">A2 - B√°sico (10)</button>
                <button class="filter-btn" onclick="filterAudioByLevel('B1')">B1 - Intermedi√°rio (10)</button>
                <button class="filter-btn" onclick="filterAudioByLevel('B1_plus')">B1+ - Inter. Avan√ßado (10)</button>
                <button class="filter-btn" onclick="filterAudioByLevel('B2')">B2 - Avan√ßado (10)</button>
            </div>

            <div class="audio-exercises-container" id="audio-exercises">
                <!-- Audio exercises will be loaded here -->
            </div>
        </div>
    </main>

    <!-- Exercise Modal -->
    <div id="exercise-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="modal-title">Exerc√≠cios</div>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <div class="exercise-container" id="exercise-content">
                <!-- Exercises will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Achievement Notification -->
    <div id="achievement" class="achievement">
        <div class="achievement-title">üèÜ Conquista Desbloqueada!</div>
        <div id="achievement-text"></div>
    </div>

    <script>
        // Comprehensive Module Data - A2 to B2
        const modulesData = {
            A2: [
                {
                    id: 'a2-cotidiano',
                    icon: 'üè†',
                    title: 'Vida Cotidiana',
                    subtitle: 'Conversas b√°sicas do dia a dia',
                    lessons: 10,
                    completed: 0,
                    xp: 0,
                    exercises: [
                        {
                            question: 'Como voc√™ diz "Bom dia" em espanhol?',
                            options: ['Buenos d√≠as', 'Buenas tardes', 'Buenas noches', 'Hola d√≠a'],
                            correct: 0,
                            explanation: '"Buenos d√≠as" √© a sauda√ß√£o correta para bom dia em espanhol.'
                        },
                        {
                            question: 'Complete: "Me ____ Mar√≠a"',
                            options: ['llamo', 'chamo', 'nombre', 'soy'],
                            correct: 0,
                            explanation: '"Me llamo" √© a forma correta para dizer "Meu nome √©" em espanhol.'
                        },
                        {
                            question: 'Qual √© a tradu√ß√£o de "Quanto custa?"',
                            options: ['¬øCu√°nto cuesta?', '¬øQu√© precio?', '¬øCu√°nto es?', '¬øCu√°nto vale?'],
                            correct: 0,
                            explanation: '"¬øCu√°nto cuesta?" √© a forma mais comum de perguntar o pre√ßo.'
                        }
                    ]
                },
                {
                    id: 'a2-familia',
                    icon: 'üë®‚Äçüë©‚Äçüëß',
                    title: 'Fam√≠lia e Rela√ß√µes',
                    subtitle: 'Vocabul√°rio sobre fam√≠lia',
                    lessons: 8,
                    completed: 0,
                    xp: 0,
                    exercises: [
                        {
                            question: 'Como se diz "irm√£o" em espanhol?',
                            options: ['hermano', 'irm√£o', 'hermana', 'primo'],
                            correct: 0,
                            explanation: '"Hermano" √© irm√£o em espanhol. "Hermana" √© irm√£.'
                        },
                        {
                            question: 'Complete: "Mi ____ tiene 50 a√±os" (m√£e)',
                            options: ['madre', 'mam√°', 'mama', 'm√£e'],
                            correct: 0,
                            explanation: '"Madre" √© a forma formal de dizer m√£e. "Mam√°" tamb√©m est√° correto, mas √© informal.'
                        },
                        {
                            question: 'Qual √© o plural de "hijo" (filho)?',
                            options: ['hijos', 'hijas', 'hijo', 'filhos'],
                            correct: 0,
                            explanation: '"Hijos" √© o plural de hijo. Quando masculino, inclui filhos e filhas.'
                        }
                    ]
                },
                {
                    id: 'a2-compras',
                    icon: 'üõçÔ∏è',
                    title: 'Compras e Mercado',
                    subtitle: 'Fazer compras em espanhol',
                    lessons: 12,
                    completed: 0,
                    xp: 0,
                    exercises: [
                        {
                            question: 'O que significa "ir de compras"?',
                            options: ['fazer compras', 'comprar', 'vender', 'trocar'],
                            correct: 0,
                            explanation: '"Ir de compras" significa fazer compras, ir √†s compras.'
                        },
                        {
                            question: 'Complete: "Quiero ____ una camisa"',
                            options: ['comprar', 'compro', 'comprando', 'compr√©'],
                            correct: 0,
                            explanation: '"Quiero comprar" usa o infinitivo ap√≥s o verbo querer.'
                        },
                        {
                            question: 'Como se diz "desconto" em espanhol?',
                            options: ['descuento', 'desconto', 'rebaja', 'oferta'],
                            correct: 0,
                            explanation: '"Descuento" √© a tradu√ß√£o direta. "Rebaja" tamb√©m pode ser usado.'
                        }
                    ]
                },
                {
                    id: 'a2-numeros',
                    icon: 'üî¢',
                    title: 'N√∫meros e Datas',
                    subtitle: 'N√∫meros, horas e datas',
                    lessons: 10,
                    completed: 0,
                    xp: 0,
                    exercises: [
                        {
                            question: 'Como se escreve o n√∫mero 15 em espanhol?',
                            options: ['quince', 'quinze', 'quize', 'dies y cinco'],
                            correct: 0,
                            explanation: '"Quince" √© como se escreve 15 em espanhol.'
                        },
                        {
                            question: 'Complete: "Son las ____ de la tarde" (3 horas)',
                            options: ['tres', 'tree', 'tr√©s', 'trez'],
                            correct: 0,
                            explanation: '"Tres" √© o n√∫mero 3 em espanhol. "Son las tres" = S√£o tr√™s horas.'
                        },
                        {
                            question: 'Como se diz "hoje" em espanhol?',
                            options: ['hoy', 'hoje', 'oy', 'ahora'],
                            correct: 0,
                            explanation: '"Hoy" √© hoje. "Ahora" significa agora.'
                        }
                    ]
                },
                {
                    id: 'a2-cores',
                    icon: 'üé®',
                    title: 'Cores e Descri√ß√µes',
                    subtitle: 'Descrever objetos e pessoas',
                    lessons: 8,
                    completed: 0,
                    xp: 0,
                    exercises: [
                        {
                            question: 'Como se diz "azul" em espanhol?',
                            options: ['azul', 'blue', 'blau', 'azur'],
                            correct: 0,
                            explanation: '"Azul" √© a mesma palavra em portugu√™s e espanhol!'
                        },
                        {
                            question: 'Complete: "El coche es ____" (vermelho)',
                            options: ['rojo', 'roja', 'vermelho', 'red'],
                            correct: 0,
                            explanation: '"Rojo" concorda com "coche" (masculino). Seria "roja" se fosse feminino.'
                        },
                        {
                            question: 'Qual √© o oposto de "grande"?',
                            options: ['peque√±o', 'chico', 'poco', 'bajo'],
                            correct: 0,
                            explanation: '"Peque√±o" √© pequeno, o oposto de grande.'
                        }
                    ]
                }
            ],
            B1: [
                {
                    id: 'b1-negocios',
                    icon: 'üíº',
                    title: 'Espanhol de Neg√≥cios',
                    subtitle: 'Vocabul√°rio corporativo',
                    lessons: 15,
                    completed: 0,
                    xp: 0,
                    exercises: [
                        {
                            question: 'Complete: "Necesitamos ____ un acuerdo"',
                            options: ['alcanzar', 'llegar', 'hacer', 'tomar'],
                            correct: 0,
                            explanation: '"Alcanzar un acuerdo" √© a express√£o idiom√°tica correta em neg√≥cios.'
                        },
                        {
                            question: 'Como se diz "reuni√£o" em espanhol?',
                            options: ['reuni√≥n', 'junta', 'encuentro', 'meeting'],
                            correct: 0,
                            explanation: '"Reuni√≥n" √© a palavra mais comum para reuni√£o de neg√≥cios.'
                        },
                        {
                            question: 'Complete: "Voy a ____ una presentaci√≥n"',
                            options: ['hacer', 'dar', 'presentar', 'mostrar'],
                            correct: 0,
                            explanation: '"Hacer una presentaci√≥n" √© a forma mais comum, embora "dar" tamb√©m seja aceito.'
                        }
                    ]
                },
                {
                    id: 'b1-viajes',
                    icon: '‚úàÔ∏è',
                    title: 'Viagens e Turismo',
                    subtitle: 'Vocabul√°rio de viagem',
                    lessons: 12,
                    completed: 0,
                    xp: 0,
                    exercises: [
                        {
                            question: 'No aeroporto, voc√™ precisa ____ o equipaje',
                            options: ['facturar', 'revisar', 'guardar', 'colocar'],
                            correct: 0,
                            explanation: '"Facturar el equipaje" significa fazer check-in da bagagem.'
                        },
                        {
                            question: 'Como se diz "passagem de ida e volta"?',
                            options: ['billete de ida y vuelta', 'passagem ida e volta', 'ticket redondo', 'boleto completo'],
                            correct: 0,
                            explanation: '"Billete de ida y vuelta" √© a forma correta.'
                        },
                        {
                            question: 'Complete: "¬øA qu√© hora es el ____?"',
                            options: ['embarque', 'embarco', 'embarca√ß√£o', 'embarcar'],
                            correct: 0,
                            explanation: '"Embarque" √© o substantivo correto para boarding.'
                        }
                    ]
                },
                {
                    id: 'b1-restaurante',
                    icon: 'üçΩÔ∏è',
                    title: 'Restaurantes',
                    subtitle: 'Pedidos e culin√°ria',
                    lessons: 10,
                    completed: 0,
                    xp: 0,
                    exercises: [
                        {
                            question: 'Para pedir a conta: "¬øMe trae ____?"',
                            options: ['la cuenta', 'el precio', 'el total', 'la factura'],
                            correct: 0,
                            explanation: '"La cuenta" √© a forma correta de pedir a conta.'
                        },
                        {
                            question: 'O que significa "de primero"?',
                            options: ['como entrada', 'primeiro a chegar', 'em primeiro', 'de primeira'],
                            correct: 0,
                            explanation: '"De primero" significa como prato de entrada.'
                        },
                        {
                            question: 'Complete: "¬øQu√© me ____?"',
                            options: ['recomienda', 'sugiere', 'aconseja', 'indica'],
                            correct: 0,
                            explanation: '"¬øQu√© me recomienda?" √© a forma mais comum de pedir recomenda√ß√£o.'
                        }
                    ]
                },
                {
                    id: 'b1-subjuntivo',
                    icon: 'üìö',
                    title: 'Subjuntivo B√°sico',
                    subtitle: 'Introdu√ß√£o ao modo subjuntivo',
                    lessons: 18,
                    completed: 0,
                    xp: 0,
                    exercises: [
                        {
                            question: 'Complete: "Espero que ____ bien" (tu)',
                            options: ['est√©s', 'estas', 'est√°s', 'estar'],
                            correct: 0,
                            explanation: 'Ap√≥s "espero que" usamos subjuntivo: "est√©s".'
                        },
                        {
                            question: 'Complete: "Quiero que ____ conmigo" (venir - t√∫)',
                            options: ['vengas', 'vienes', 'venir', 'vens'],
                            correct: 0,
                            explanation: '"Querer que" requer subjuntivo: vengas.'
                        },
                        {
                            question: 'Complete: "No creo que ____ posible" (ser)',
                            options: ['sea', 'es', 'est√°', 'ser'],
                            correct: 0,
                            explanation: 'Express√µes de d√∫vida usam subjuntivo: "sea".'
                        }
                    ]
                },
                {
                    id: 'b1-falsos-amigos',
                    icon: '‚ö†Ô∏è',
                    title: 'Falsos Amigos',
                    subtitle: 'Palavras que enganam brasileiros',
                    lessons: 14,
                    completed: 0,
                    xp: 0,
                    exercises: [
                        {
                            question: '"Embarazada" significa:',
                            options: ['gr√°vida', 'embara√ßada', 'constrangida', 'envergonhada'],
                            correct: 0,
                            explanation: 'CUIDADO! "Embarazada" = gr√°vida, n√£o embara√ßada!'
                        },
                        {
                            question: 'O que significa "exquisito"?',
                            options: ['delicioso/refinado', 'esquisito', 'estranho', 'raro'],
                            correct: 0,
                            explanation: '"Exquisito" significa delicioso/requintado, n√£o esquisito!'
                        },
                        {
                            question: '"Acordarse" significa:',
                            options: ['lembrar-se', 'acordar', 'despertar', 'levantar-se'],
                            correct: 0,
                            explanation: '"Acordarse" = lembrar-se. "Despertar(se)" = acordar.'
                        }
                    ]
                }
            ],
            B1_plus: [
                {
                    id: 'b1p-conversacao',
                    icon: 'üí¨',
                    title: 'Conversa√ß√£o Avan√ßada',
                    subtitle: 'Express√µes e g√≠rias',
                    lessons: 16,
                    completed: 0,
                    xp: 0,
                    exercises: [
                        {
                            question: 'O que significa "¬°Qu√© ch√©vere!"?',
                            options: ['Que legal!', 'Que chato!', 'Que estranho!', 'Que dif√≠cil!'],
                            correct: 0,
                            explanation: '"¬°Qu√© ch√©vere!" √© uma express√£o muito usada para dizer "Que legal!"'
                        },
                        {
                            question: 'Se algu√©m diz "¬°Qu√© rollo!", est√° expressando:',
                            options: ['t√©dio', 'alegria', 'surpresa', 'medo'],
                            correct: 0,
                            explanation: '"¬°Qu√© rollo!" expressa t√©dio ou que algo √© chato.'
                        },
                        {
                            question: '"Quedar con alguien" significa:',
                            options: ['combinar de se encontrar', 'ficar com algu√©m', 'sobrar para algu√©m', 'permanecer'],
                            correct: 0,
                            explanation: '"Quedar con alguien" = marcar um encontro, combinar de se ver.'
                        }
                    ]
                },
                {
                    id: 'b1p-trabalho',
                    icon: 'üëî',
                    title: 'Entrevistas de Trabalho',
                    subtitle: 'Prepara√ß√£o profissional',
                    lessons: 14,
                    completed: 0,
                    xp: 0,
                    exercises: [
                        {
                            question: 'Como se diz "curr√≠culo" em espanhol?',
                            options: ['curr√≠culum', 'curr√≠culo', 'cv', 'hoja de vida'],
                            correct: 0,
                            explanation: '"Curr√≠culum" ou "CV" s√£o as formas corretas. Na Am√©rica Latina tamb√©m usam "hoja de vida".'
                        },
                        {
                            question: 'Complete: "Tengo ____ a√±os de experiencia"',
                            options: ['cinco', 'cincos', 'cinco de', 'cinco a√±os'],
                            correct: 0,
                            explanation: 'N√∫meros n√£o t√™m plural: "cinco a√±os", nunca "cincos a√±os".'
                        },
                        {
                            question: 'Como voc√™ diz "trabalho em equipe"?',
                            options: ['trabajo en equipo', 'trabajo de equipo', 'trabajo equipo', 'equipo trabajo'],
                            correct: 0,
                            explanation: '"Trabajo en equipo" √© a express√£o correta.'
                        }
                    ]
                },
                {
                    id: 'b1p-por-para',
                    icon: 'üîÄ',
                    title: 'Por vs Para - Dom√≠nio',
                    subtitle: 'A diferen√ßa definitiva',
                    lessons: 12,
                    completed: 0,
                    xp: 0,
                    exercises: [
                        {
                            question: 'Complete: "Voy ____ la tienda"',
                            options: ['para', 'por', 'a', 'hacia'],
                            correct: 0,
                            explanation: '"Para" indica destino/dire√ß√£o: vou PARA a loja.'
                        },
                        {
                            question: 'Complete: "Pas√© ____ tu casa"',
                            options: ['por', 'para', 'a', 'en'],
                            correct: 0,
                            explanation: '"Por" indica movimento atrav√©s de um lugar: passei POR sua casa.'
                        },
                        {
                            question: 'Complete: "Este regalo es ____ ti"',
                            options: ['para', 'por', 'a', 'de'],
                            correct: 0,
                            explanation: '"Para" indica destinat√°rio: este presente √© PARA voc√™.'
                        }
                    ]
                },
                {
                    id: 'b1p-cultura',
                    icon: 'üé≠',
                    title: 'Cultura Hisp√¢nica',
                    subtitle: 'Tradi√ß√µes e costumes',
                    lessons: 10,
                    completed: 0,
                    xp: 0,
                    exercises: [
                        {
                            question: 'O que √© "la siesta"?',
                            options: ['cochilo ap√≥s o almo√ßo', 'festa', 'jantar tardio', 'caf√© da tarde'],
                            correct: 0,
                            explanation: '"La siesta" √© o costume de tirar uma soneca ap√≥s o almo√ßo.'
                        },
                        {
                            question: 'Em que pa√≠s se fala "vosotros"?',
                            options: ['Espanha', 'M√©xico', 'Argentina', 'Todos'],
                            correct: 0,
                            explanation: '"Vosotros" √© usado principalmente na Espanha. Na Am√©rica Latina usam "ustedes".'
                        },
                        {
                            question: 'O que s√£o "tapas"?',
                            options: ['petiscos espanh√≥is', 'tampas', 'sapatos', 'festas'],
                            correct: 0,
                            explanation: '"Tapas" s√£o pequenos petiscos servidos em bares na Espanha.'
                        }
                    ]
                }
            ],
            B2: [
                {
                    id: 'b2-negocios-avancado',
                    icon: 'üìä',
                    title: 'Neg√≥cios Internacionais',
                    subtitle: 'N√≠vel executivo',
                    lessons: 20,
                    completed: 0,
                    xp: 0,
                    exercises: [
                        {
                            question: 'Como se diz "stakeholder" profissionalmente?',
                            options: ['parte interesada', 'accionista', 'socio', 'inversor'],
                            correct: 0,
                            explanation: '"Parte interesada" √© o termo mais preciso e profissional.'
                        },
                        {
                            question: 'Complete: "Debemos ____ un an√°lisis de viabilidad"',
                            options: ['realizar', 'hacer', 'efectuar', 'ejecutar'],
                            correct: 0,
                            explanation: '"Realizar" √© o verbo mais formal para contextos empresariais.'
                        },
                        {
                            question: 'O que significa "cumplir los objetivos"?',
                            options: ['atingir os objetivos', 'cumprir objetivos', 'fazer objetivos', 'ter objetivos'],
                            correct: 0,
                            explanation: '"Cumplir los objetivos" = atingir/alcan√ßar os objetivos.'
                        }
                    ]
                },
                {
                    id: 'b2-subjuntivo-avancado',
                    icon: 'üéì',
                    title: 'Subjuntivo Avan√ßado',
                    subtitle: 'Dom√≠nio completo',
                    lessons: 18,
                    completed: 0,
                    xp: 0,
                    exercises: [
                        {
                            question: 'Complete: "Aunque ____ dinero, no lo comprar√≠a" (tener)',
                            options: ['tuviera', 'tenga', 'tendr√≠a', 'ten√≠a'],
                            correct: 0,
                            explanation: '"Aunque" com hip√≥tese irreal usa imperfecto de subjuntivo: tuviera.'
                        },
                        {
                            question: 'Complete: "Si ____ tiempo, ir√≠a" (tener)',
                            options: ['tuviera', 'tengo', 'tendr√≠a', 'tenga'],
                            correct: 0,
                            explanation: 'Condicionais irreais usam imperfecto de subjuntivo: si tuviera.'
                        },
                        {
                            question: 'Complete: "Cuando ____, te llamar√©" (llegar)',
                            options: ['llegue', 'llego', 'llegar√©', 'llegara'],
                            correct: 0,
                            explanation: '"Cuando" com futuro usa subjuntivo presente: llegue.'
                        }
                    ]
                },
                {
                    id: 'b2-escritura',
                    icon: '‚úçÔ∏è',
                    title: 'Reda√ß√£o Profissional',
                    subtitle: 'Emails e relat√≥rios',
                    lessons: 16,
                    completed: 0,
                    xp: 0,
                    exercises: [
                        {
                            question: 'Como iniciar um email formal?',
                            options: ['Estimado/a', 'Querido/a', 'Hola', 'Buenos d√≠as'],
                            correct: 0,
                            explanation: '"Estimado/a" √© a sauda√ß√£o formal correta para emails profissionais.'
                        },
                        {
                            question: 'Para encerrar formalmente: "____"',
                            options: ['Atentamente', 'Un saludo', 'Saludos', 'Hasta luego'],
                            correct: 0,
                            explanation: '"Atentamente" √© o fechamento mais formal.'
                        },
                        {
                            question: 'Complete: "Adjunto ____ el documento"',
                            options: ['le env√≠o', 'env√≠o', 'estoy enviando', 'mando'],
                            correct: 0,
                            explanation: '"Adjunto le env√≠o" √© a f√≥rmula formal para anexar documentos.'
                        }
                    ]
                },
                {
                    id: 'b2-debate',
                    icon: 'üó£Ô∏è',
                    title: 'Argumenta√ß√£o e Debate',
                    subtitle: 'Expressar opini√µes complexas',
                    lessons: 14,
                    completed: 0,
                    xp: 0,
                    exercises: [
                        {
                            question: 'Para concordar formalmente:',
                            options: ['Estoy de acuerdo', 'S√≠, tienes raz√≥n', 'Vale', 'Ok'],
                            correct: 0,
                            explanation: '"Estoy de acuerdo" √© a forma mais formal de concordar.'
                        },
                        {
                            question: 'Para contraargumentar: "Sin embargo, ____"',
                            options: ['no estoy convencido', 'no s√©', 'tal vez', 'puede ser'],
                            correct: 0,
                            explanation: '"Sin embargo, no estoy convencido" apresenta contraargumento educado.'
                        },
                        {
                            question: 'Complete: "Desde mi ____, es importante..."',
                            options: ['punto de vista', 'opini√≥n', 'perspectiva', 'visi√≥n'],
                            correct: 0,
                            explanation: '"Desde mi punto de vista" √© a express√£o formal para dar opini√£o.'
                        }
                    ]
                },
                {
                    id: 'b2-idiomas',
                    icon: 'üåç',
                    title: 'Express√µes Idiom√°ticas',
                    subtitle: 'Falar como nativo',
                    lessons: 15,
                    completed: 0,
                    xp: 0,
                    exercises: [
                        {
                            question: 'O que significa "estar en las nubes"?',
                            options: ['estar distra√≠do', 'estar nas nuvens', 'estar feliz', 'estar voando'],
                            correct: 0,
                            explanation: '"Estar en las nubes" = estar distra√≠do, no mundo da lua.'
                        },
                        {
                            question: '"Llover sobre mojado" significa:',
                            options: ['problema ap√≥s problema', 'chover muito', 'ficar molhado', 'ter azar'],
                            correct: 0,
                            explanation: '"Llover sobre mojado" = quando os problemas se acumulam.'
                        },
                        {
                            question: 'O que √© "dormir como un tronco"?',
                            options: ['dormir profundamente', 'dormir pouco', 'roncar', 'ter ins√¥nia'],
                            correct: 0,
                            explanation: '"Dormir como un tronco" = dormir profundamente, como uma pedra.'
                        }
                    ]
                }
            ]
        };

        // State Management
        let currentLevel = 'A2';
        let currentExercises = [];
        let currentExerciseIndex = 0;
        let score = 0;
        let selectedOption = null;
        let userProgress = {
            totalXP: 0,
            lessonsCompleted: 0,
            vocabLearned: 0,
            streak: 0,
            currentLevel: 'A2'
        };

        // Initialize
        function init() {
            loadModules(currentLevel);
            updateStats();
        }

        // Load Modules for Selected Level
        function loadModules(level) {
            const container = document.getElementById('modules-container');
            const modules = modulesData[level];
            
            let levelTitle = {
                'A2': 'N√≠vel A2 - B√°sico',
                'B1': 'N√≠vel B1 - Intermedi√°rio',
                'B1_plus': 'N√≠vel B1+ - Intermedi√°rio Avan√ßado',
                'B2': 'N√≠vel B2 - Avan√ßado'
            };

            container.innerHTML = `
                <h2 class="section-title">${levelTitle[level]}</h2>
                <div class="modules-grid">
                    ${modules.map(module => `
                        <div class="module-card" onclick="startModule('${level}', '${module.id}')">
                            <div class="module-header">
                                <div class="module-icon">${module.icon}</div>
                                <div class="module-title">${module.title}</div>
                                <div class="module-subtitle">${module.subtitle}</div>
                            </div>
                            <div class="module-body">
                                <div class="module-stats">
                                    <div class="module-stat">
                                        <div class="module-stat-value">${module.completed}/${module.lessons}</div>
                                        <div class="module-stat-label">Li√ß√µes</div>
                                    </div>
                                    <div class="module-stat">
                                        <div class="module-stat-value">${module.xp}</div>
                                        <div class="module-stat-label">XP</div>
                                    </div>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: ${(module.completed / module.lessons * 100)}%"></div>
                                </div>
                                <button class="start-btn">
                                    ${module.completed === 0 ? 'Come√ßar' : 'Continuar'}
                                </button>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        // Level Selection
        function selectLevel(level) {
            currentLevel = level;
            document.querySelectorAll('.level-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            loadModules(level);
        }

        // Start Module
        function startModule(level, moduleId) {
            const module = modulesData[level].find(m => m.id === moduleId);
            currentExercises = module.exercises;
            currentExerciseIndex = 0;
            score = 0;
            selectedOption = null;
            showExercise();
        }

        // Show Exercise
        function showExercise() {
            if (currentExerciseIndex >= currentExercises.length) {
                showResults();
                return;
            }

            const exercise = currentExercises[currentExerciseIndex];
            const modal = document.getElementById('exercise-modal');
            const title = document.getElementById('modal-title');
            const content = document.getElementById('exercise-content');

            title.textContent = `Exerc√≠cio ${currentExerciseIndex + 1} de ${currentExercises.length}`;
            
            content.innerHTML = `
                <div class="exercise-progress">
                    <div>Quest√£o ${currentExerciseIndex + 1}/${currentExercises.length}</div>
                    <div>Pontua√ß√£o: ${score}/${currentExercises.length}</div>
                </div>
                <div class="question">
                    <div class="question-number">QUEST√ÉO ${currentExerciseIndex + 1}</div>
                    <div class="question-text">${exercise.question}</div>
                    <div class="options">
                        ${exercise.options.map((option, index) => `
                            <div class="option" onclick="selectOption(${index})" data-index="${index}">
                                <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                                <div>${option}</div>
                            </div>
                        `).join('')}
                    </div>
                    <button class="submit-answer" onclick="checkAnswer()">Verificar Resposta</button>
                    <div class="feedback" id="feedback"></div>
                </div>
            `;

            modal.classList.add('active');
        }

        // Select Option
        function selectOption(index) {
            selectedOption = index;
            document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
            document.querySelector(`[data-index="${index}"]`).classList.add('selected');
        }

        // Check Answer
        function checkAnswer() {
            if (selectedOption === null) {
                alert('Por favor, selecione uma op√ß√£o');
                return;
            }

            const exercise = currentExercises[currentExerciseIndex];
            const feedback = document.getElementById('feedback');
            const options = document.querySelectorAll('.option');

            options[exercise.correct].classList.add('correct');
            
            if (selectedOption === exercise.correct) {
                score++;
                feedback.className = 'feedback correct show';
                feedback.innerHTML = `
                    <strong>‚úÖ Correto! Excelente!</strong><br>
                    ${exercise.explanation}
                    <button class="next-btn" onclick="nextExercise()">Pr√≥xima ‚Üí</button>
                `;
                showAchievement('Resposta correta! +50 XP');
                updateXP(50);
            } else {
                options[selectedOption].classList.add('incorrect');
                feedback.className = 'feedback incorrect show';
                feedback.innerHTML = `
                    <strong>‚ùå Incorreto</strong><br>
                    ${exercise.explanation}
                    <button class="next-btn" onclick="nextExercise()">Pr√≥xima ‚Üí</button>
                `;
            }

            document.querySelector('.submit-answer').disabled = true;
        }

        // Next Exercise
        function nextExercise() {
            currentExerciseIndex++;
            selectedOption = null;
            showExercise();
        }

        // Show Results
        function showResults() {
            const content = document.getElementById('exercise-content');
            const percentage = Math.round((score / currentExercises.length) * 100);
            
            content.innerHTML = `
                <div style="text-align: center; padding: 3rem;">
                    <h2 style="font-size: 4rem; margin-bottom: 1rem;">${percentage >= 70 ? 'üéâ' : 'üí™'}</h2>
                    <h3 style="font-family: 'Bebas Neue'; font-size: 2.5rem; margin-bottom: 1rem; letter-spacing: 2px;">
                        ${percentage >= 70 ? '¬°EXCELENTE!' : '¬°SIGUE PRACTICANDO!'}
                    </h3>
                    <p style="font-size: 2rem; margin-bottom: 2rem; color: var(--gray);">
                        ${score}/${currentExercises.length} corretas (${percentage}%)
                    </p>
                    <div style="margin: 2rem 0;">
                        <div class="progress-bar" style="max-width: 400px; margin: 0 auto;">
                            <div class="progress-fill" style="width: ${percentage}%"></div>
                        </div>
                    </div>
                    <button class="start-btn" onclick="closeModal()" style="max-width: 300px; margin: 0 auto;">
                        Voltar ao Dashboard
                    </button>
                </div>
            `;

            if (percentage >= 70) {
                showAchievement(`M√≥dulo completado! +${score * 100} XP`);
                updateXP(score * 100);
                userProgress.lessonsCompleted++;
                userProgress.vocabLearned += score * 5;
                updateStats();
            }
        }

        // Close Modal
        function closeModal() {
            document.getElementById('exercise-modal').classList.remove('active');
        }

        // Show Achievement
        function showAchievement(text) {
            const achievement = document.getElementById('achievement');
            document.getElementById('achievement-text').textContent = text;
            achievement.classList.add('show');
            
            setTimeout(() => {
                achievement.classList.remove('show');
            }, 3000);
        }

        // Update XP
        function updateXP(amount) {
            userProgress.totalXP += amount;
            updateStats();
        }

        // Update Stats
        function updateStats() {
            document.getElementById('total-xp').textContent = userProgress.totalXP.toLocaleString('pt-BR');
            document.getElementById('lessons-completed').textContent = userProgress.lessonsCompleted;
            document.getElementById('vocab-count').textContent = userProgress.vocabLearned;
            document.getElementById('current-level').textContent = userProgress.currentLevel;
            document.getElementById('streak-count').textContent = userProgress.streak;
            
            // Update level progress
            const levelProgress = (userProgress.totalXP % 1000) / 10;
            document.getElementById('level-progress').style.width = levelProgress + '%';
        }

        // Tab Navigation
        function showTab(tab) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
            
            document.getElementById(`${tab}-tab`).classList.add('active');
            event.target.classList.add('active');
        }

        // Initialize on load
        init();

        // ==============================================
        // CHAT IA COM CLAUDE API
        // ==============================================
        
        // =====================================================
        // SISTEMA DE CHAT INTELIGENTE (70+ respostas)
        // =====================================================
        const chatResponses = {
            saudacoes: {
                keywords: ['hola', 'ola', 'buenos dias', 'buenas tardes', 'buenas noches', 'hey', 'hello'],
                responses: [
                    '¬°Hola! ¬øEn qu√© puedo ayudarte hoy? Puedo corregir tu espa√±ol, explicar gram√°tica o practicar conversaci√≥n contigo. üòä',
                    '¬°Buenos d√≠as! Estoy aqu√≠ para ayudarte a mejorar tu espa√±ol. ¬øQu√© te gustar√≠a practicar hoy?',
                    '¬°Hola! Me alegra verte por aqu√≠. ¬øPracticamos conversaci√≥n o prefieres que explique alg√∫n tema de gram√°tica?'
                ]
            },
            presentacion: {
                keywords: ['me llamo', 'mi nombre', 'me chamo', 'meu nome'],
                responses: [
                    '¬°Encantado de conocerte! Tu presentaci√≥n est√° muy bien. Recuerda: "Me llamo [nombre]" o tambi√©n puedes decir "Soy [nombre]". ¬°Muy natural!',
                    '¬°Perfecto! Tu presentaci√≥n suena natural. Si quieres ser m√°s formal, puedes decir "Mi nombre es..." en lugar de "Me llamo..."',
                    '¬°Muy bien! Una variaci√≥n √∫til: en contextos formales usa "Mi nombre es..." y en contextos informales "Me llamo..." o simplemente "Soy..."'
                ]
            },
            edad: {
                keywords: ['tengo', 'a√±os', 'idade', 'age'],
                responses: [
                    '¬°Muy bien! Recuerda siempre usar TENER para la edad: "Tengo [n√∫mero] a√±os". Nunca "Soy [n√∫mero] a√±os". ¬øQuieres practicar m√°s?',
                    'Perfecto uso del verbo TENER para la edad. En espa√±ol decimos "Tengo 30 a√±os", nunca "Soy 30 a√±os". ¬°Bien hecho!',
                    '¬°Correcto! TENER es el verbo para edad en espa√±ol. Ejemplo completo: "Me llamo Ana, tengo 25 a√±os y soy de Brasil." ¬øPuedes presentarte as√≠?'
                ]
            },
            subjuntivo: {
                keywords: ['subjuntivo', 'subjuntivo', 'espero que', 'quiero que', 'dudo que', 'ojal√°', 'aunque'],
                responses: [
                    'El subjuntivo se usa para: deseos (espero que vengas), dudas (no creo que sea), emociones (me alegra que est√©s aqu√≠) y posibilidades (quiz√°s venga). ¬øQu√© parte te genera m√°s dudas?',
                    '¬°Buena pregunta! El subjuntivo aparece despu√©s de: espero que, quiero que, dudo que, ojal√°, aunque (con duda), cuando (futuro). Ejemplo: "Cuando LLEGUES, ll√°mame." ¬øQuieres m√°s ejemplos?',
                    'El subjuntivo tiene 2 tiempos principales: Presente (hable/coma/viva) e Imperfecto (hablara/comiera/viviera). El presente es para situaciones actuales o futuras, el imperfecto para hip√≥tesis pasadas.'
                ]
            },
            ser_estar: {
                keywords: ['ser o estar', 'ser y estar', 'diferencia ser', 'cuando usar ser', 'cuando usar estar', 'ser estar'],
                responses: [
                    'Regla clave: SER = esencia permanente (Soy brasile√±o, Es m√©dico, La casa es grande). ESTAR = estado temporal o ubicaci√≥n (Estoy cansado, Est√° en Madrid, El caf√© est√° fr√≠o). ¬øQuieres ejemplos?',
                    '¬°Excelente pregunta! SER para lo que NO cambia: origen (Soy de Brasil), profesi√≥n (Soy profesor), caracter√≠sticas (Soy alto). ESTAR para lo que puede cambiar: emociones, ubicaci√≥n, estados f√≠sicos.',
                    'Truco f√°cil: preg√∫ntate "¬øpuede cambiar?". Si s√≠ ‚Üí ESTAR. Si no ‚Üí SER. "Estoy enfermo" (puede curarse = ESTAR). "Soy alto" (no cambia = SER). ¬øPracticamos con ejemplos?'
                ]
            },
            por_para: {
                keywords: ['por o para', 'diferencia por', 'cuando usar por', 'cuando usar para', 'por para'],
                responses: [
                    'POR = causa/raz√≥n/medio: "Lo hice POR ti", "Viajo POR avi√≥n", "POR la ma√±ana". PARA = objetivo/destino/opini√≥n: "Estudio PARA aprender", "Es PARA ti", "PARA m√≠ es dif√≠cil".',
                    'F√°cil! POR responde "¬øpor qu√©?" (raz√≥n). PARA responde "¬øpara qu√©?" (prop√≥sito). Ejemplo: "Trabajo POR necesidad" (raz√≥n) vs "Trabajo PARA vivir mejor" (objetivo).',
                    'Usos de POR: tiempo aproximado (por la tarde), lugar aproximado (por Madrid), causa (por amor), medio (por tel√©fono). Usos de PARA: prop√≥sito (para estudiar), destinatario (para ti), plazo (para el lunes).'
                ]
            },
            verbos: {
                keywords: ['conjugar', 'conjugaci√≥n', 'conjugacao', 'presente', 'pasado', 'futuro', 'irregular'],
                responses: [
                    'Los verbos irregulares m√°s usados en presente: SER (soy/eres/es), ESTAR (estoy/est√°s/est√°), IR (voy/vas/va), TENER (tengo/tienes/tiene), HACER (hago/haces/hace). ¬øCu√°l necesitas practicar?',
                    'Tip: muchos verbos irregulares cambian solo en primera persona (yo): HACER‚Üíhago, PONER‚Üípongo, SALIR‚Üísalgo, VENIR‚Üívengo, DECIR‚Üídigo. Las dem√°s personas son regulares.',
                    'En el pasado (pret√©rito indefinido), los irregulares m√°s importantes: SER/IR (fui/fuiste/fue), ESTAR (estuve), TENER (tuve), HACER (hice), PODER (pude), VENIR (vine).'
                ]
            },
            vocabulario: {
                keywords: ['como se dice', 'c√≥mo se dice', 'que significa', 'qu√© significa', 'palavra', 'palabra', 'vocabulario', 'traducir', 'traducci√≥n'],
                responses: [
                    'Para ampliar vocabulario, recomiendo: 1) Aprender palabras en contexto (en frases), 2) Revisar con flashcards, 3) Leer en espa√±ol 10 min/d√≠a, 4) Ver series con subt√≠tulos en espa√±ol. ¬øQu√© tema de vocabulario te interesa?',
                    'Tip de vocabulario: enf√≥cate primero en las 500 palabras m√°s frecuentes. Ellas cubren el 75% de conversaciones cotidianas. Aqu√≠ las tenemos en los flashcards. ¬øYa los usaste?',
                    'Para vocabulario de negocios, las palabras clave son: reuni√≥n, acuerdo, propuesta, plazo, presupuesto, cliente, proveedor, contrato. ¬øQuieres que practiquemos frases con alguna de estas?'
                ]
            },
            pronuncia: {
                keywords: ['pronunciar', 'pronunciaci√≥n', 'pronunciacao', 'como suena', 'rr', 'jota', 'sonido', 'acento'],
                responses: [
                    'Para el RR fuerte: coloca la punta de la lengua detr√°s de los dientes superiores y deja que el aire la haga vibrar. Practica con: "perro", "carro", "tierra". Empieza despacio y acelera.',
                    'Sonidos dif√≠ciles para brasile√±os: RR (perro), J/G (jota, general), Z/C (en Espa√±a suena "th"), LL/Y (seg√∫n regi√≥n). El secreto es escuchar mucho y repetir en voz alta.',
                    'Tip de pronunciaci√≥n: gr√°bate hablando en espa√±ol y escucha. As√≠ identificas tus errores. Tambi√©n ayuda escuchar podcasts lentos como "Espa√±ol con Juan" o "Notes in Spanish".'
                ]
            },
            falsos_amigos: {
                keywords: ['embarazada', 'embara√ßada', 'exquisito', 'esquisito', 'acordarse', 'largo', 'oficina', 'polvo', 'falso', 'trampa'],
                responses: [
                    '¬°Cuidado con los falsos amigos! Los m√°s importantes para brasile√±os: EMBARAZADA = gr√°vida (¬°no envergonhada!), EXQUISITO = delicioso (¬°no esquisito!), LARGO = comprido (¬°no largo!), BORRACHA = borracha de beber (¬°igual al portugu√©s!).',
                    'M√°s falsos amigos: OFICINA = escrit√≥rio (TALLER = oficina mec√¢nica), ACORDARSE = lembrar (DESPERTAR = acordar), PRETENDER = ter a inten√ß√£o (FINGIR = fingir), SOPORTAR = aguentar.',
                    'Falsos amigos avan√ßados: REALIZAR = fazer/realizar (PERCEBER = darse cuenta), POLVO = p√≥ (no sentido negativo tamb√©m existe), BORRAR = apagar, EMBARCAR = embarcar. Sempre confirme o significado!'
                ]
            },
            practica: {
                keywords: ['practicar', 'pr√°ctica', 'conversar', 'hablar', 'platicar', 'charlar', 'dialogue', 'dialogo'],
                responses: [
                    '¬°Vamos a practicar! Te propongo: cu√©ntame sobre tu rutina diaria. Empieza con "Por la ma√±ana yo..." y yo te corrijo y ayudo a mejorar. ¬°Adelante!',
                    '¬°Perfecto! Hagamos un juego de rol. Imagina que est√°s en una reuni√≥n de negocios. Pres√©ntate: nombre, empresa y de qu√© trata la reuni√≥n. Escribe en espa√±ol y yo respondo como tu colega.',
                    '¬°Buena idea! Cu√©ntame: ¬øPor qu√© quieres aprender espa√±ol? ¬øPara viajes, trabajo o vivir en el exterior? Escribe en espa√±ol lo que puedas y yo te ayudo con el resto.'
                ]
            },
            dicas: {
                keywords: ['dica', 'consejo', 'tip', 'como aprender', 'm√©todo', 'metodo', 'estudar', 'estudiar', 'aprender'],
                responses: [
                    'Mi mejor consejo: CONSISTENCIA. 20 minutos diarios supera a 3 horas los fines de semana. Mant√©n tu racha aqu√≠ en la plataforma y notar√°s la diferencia en semanas.',
                    'M√©todo efectivo: Inmersi√≥n gradual. 1) Pon tu tel√©fono en espa√±ol. 2) Mira 1 serie en espa√±ol por semana. 3) Lee noticias simples en espa√±ol. 4) Practica aqu√≠ todos los d√≠as. ¬°Funciona!',
                    'El secreto de los poliglotas: no traduzas en tu cabeza. Piensa directamente en espa√±ol. Empieza con objetos: ves una "mesa" ‚Üí piensa "mesa", no "table". Con el tiempo el espa√±ol fluye solo.'
                ]
            },
            motivacao: {
                keywords: ['dif√≠cil', 'dificil', 'complicado', 'no entiendo', 'n√£o entendo', 'desanimado', 'cansado', 'dif√≠cil', 'no puedo'],
                responses: [
                    '¬°No te rindas! Aprender un idioma es un marat√≥n, no una carrera. Cada error que cometes es una lecci√≥n que no olvidar√°s. Los brasile√±os tienen una ventaja enorme: el portugu√©s es muy similar al espa√±ol. ¬°Puedes! üí™',
                    'Es completamente normal sentirse as√≠. El cerebro aprende idiomas en etapas, y a veces parece que no avanzas pero internamente est√°s construyendo la base. Sigue con los ejercicios diarios y la comprensi√≥n llegar√°.',
                    'Consejo: c√©l√©bra las peque√±as victorias. ¬øEntendiste una frase en una pel√≠cula? ¬°Victoria! ¬øUsaste el subjuntivo correctamente? ¬°Victoria! El progreso se nota mirando atr√°s, no hacia adelante. ¬°T√∫ puedes! üåü'
                ]
            },
            agradecimentos: {
                keywords: ['gracias', 'obrigado', 'muchas gracias', 'muito obrigado', 'thank'],
                responses: [
                    '¬°De nada! Es un placer ayudarte. ¬°Sigue practicando y ver√°s los resultados! üí™',
                    '¬°Para eso estoy! No dudes en preguntar cuando tengas dudas. ¬°El espa√±ol te est√° esperando! üöÄ',
                    '¬°Con mucho gusto! Recuerda: la pr√°ctica diaria es la clave. ¬°Hasta pronto! üòä'
                ]
            },
            despedidas: {
                keywords: ['adios', 'adi√≥s', 'hasta luego', 'chau', 'tchau', 'bye', 'nos vemos', 'hasta pronto'],
                responses: [
                    '¬°Hasta pronto! Sigue practicando todos los d√≠as. ¬°Nos vemos! üëã',
                    '¬°Adi√≥s! No olvides revisar tus flashcards hoy. ¬°Que te vaya muy bien! üòä',
                    '¬°Hasta la pr√≥xima! Recuerda: un poco cada d√≠a hace grandes cambios. ¬°√âxito! ‚ú®'
                ]
            }
        };

        function getIntelligentResponse(userMessage) {
            const msg = userMessage.toLowerCase().trim();
            for (const [cat, data] of Object.entries(chatResponses)) {
                for (const kw of data.keywords) {
                    if (msg.includes(kw)) {
                        const r = data.responses;
                        return r[Math.floor(Math.random() * r.length)];
                    }
                }
            }
            const defaults = [
                'Interesante! Puedo ayudarte con: gram√°tica (subjuntivo, ser/estar, por/para), vocabulario, pronunciaci√≥n, falsos amigos o pr√°ctica de conversaci√≥n. ¬øQu√© necesitas?',
                '¬°Buena pregunta! Para responderte mejor, ¬øme puedes dar m√°s detalles? Por ejemplo: "¬øC√≥mo se usa el subjuntivo?" o "¬øCu√°l es la diferencia entre por y para?"',
                'No reconoc√≠ exactamente ese tema. Intenta preguntar sobre: subjuntivo, ser vs estar, verbos irregulares, falsos amigos, pronunciaci√≥n, o simplemente escribe en espa√±ol para practicar!',
                '¬øPodr√≠as reformular tu pregunta? Puedo ayudarte con gram√°tica espa√±ola, correcci√≥n de textos, explicaciones de reglas, pr√°ctica de conversaci√≥n y mucho m√°s.'
            ];
            return defaults[Math.floor(Math.random() * defaults.length)];
        }

        function detectAndCorrect(userMessage) {
            const corrections = [];
            const msg = userMessage.toLowerCase();
            if (msg.includes('tenho') && !msg.includes('tengo')) corrections.push('üí° Correcci√≥n: En espa√±ol "tenho" ‚Üí "tengo". El verbo es TENER: yo tengo, t√∫ tienes, √©l tiene.');
            if (msg.match(/soy \d+ a/)) corrections.push('üí° Correcci√≥n: Para la edad usamos TENER: "Tengo 30 a√±os" (no "Soy 30 a√±os").');
            if (msg.includes('estoy de brasil') || msg.includes('estoy de portugal')) corrections.push('üí° Correcci√≥n: Para origen usamos SER: "Soy de Brasil" (no "Estoy de Brasil").');
            if (msg.includes('gosto') && !msg.includes('gusta')) corrections.push('üí° Correcci√≥n: En espa√±ol "gosto" ‚Üí "me gusta". Ejemplo: "Me gusta el caf√©".');
            if (msg.includes('falo') || msg.includes('falar')) corrections.push('üí° Correcci√≥n: En espa√±ol "falo/falar" ‚Üí "hablo/hablar". El verbo es HABLAR.');
            return corrections;
        }

        // Configure sua API Key aqui!
        const ANTHROPIC_API_KEY = 'SUA_CHAVE_API_AQUI'; // ‚¨ÖÔ∏è COLE SUA CHAVE AQUI
        
        let chatHistory = [];

        async function sendChatMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            
            if (!message) return;

            // Add user message to chat
            addMessageToChat('user', message);
            input.value = '';
            chatHistory.push({ role: 'user', content: message });

            // Check if API key is configured
            if (ANTHROPIC_API_KEY === 'SUA_CHAVE_API_AQUI') {
                setTimeout(() => {
                    const intelligentResponse = getIntelligentResponse(message);
                    const corrections = detectAndCorrect(message);
                    let finalResponse = intelligentResponse;
                    if (corrections.length > 0) {
                        finalResponse += '<br><br>' + corrections.join('<br>');
                    }
                    addMessageToChat('ai', finalResponse);
                    updateXP(5);
                }, 800);
                return;
            }

            // Call Claude API
            try {
                showTypingIndicator();
                
                const response = await fetch('https://api.anthropic.com/v1/messages', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'x-api-key': ANTHROPIC_API_KEY,
                        'anthropic-version': '2023-06-01'
                    },
                    body: JSON.stringify({
                        model: 'claude-sonnet-4-20250514',
                        max_tokens: 1000,
                        system: 'Eres un profesor de espa√±ol experimentado que ayuda a brasile√±os a aprender espa√±ol. Responde SIEMPRE en espa√±ol, corrige errores amablemente, explica brevemente las correcciones, y haz preguntas para continuar la conversaci√≥n. S√© natural, amigable y educativo.',
                        messages: chatHistory
                    })
                });

                hideTypingIndicator();

                if (!response.ok) {
                    throw new Error(`API Error: ${response.status}`);
                }

                const data = await response.json();
                
                if (data.content && data.content[0]) {
                    const aiMessage = data.content[0].text;
                    addMessageToChat('ai', aiMessage);
                    chatHistory.push({ role: 'assistant', content: aiMessage });
                    
                    // Award XP for practice
                    updateXP(10);
                    showAchievement('Pr√°tica com IA! +10 XP');
                } else {
                    addMessageToChat('ai', '‚ùå Error al procesar la respuesta. Por favor, intenta de nuevo.');
                }
                
            } catch (error) {
                hideTypingIndicator();
                console.error('Claude API Error:', error);
                addMessageToChat('ai', `‚ùå Error de conexi√≥n: ${error.message}. Verifica tu API Key en el c√≥digo.`);
            }
        }

        function addMessageToChat(type, content) {
            const messagesContainer = document.getElementById('chat-messages');
            const avatar = type === 'user' ? 'üë§' : 'ü§ñ';
            const name = type === 'user' ? 'Voc√™' : 'Profesor IA';
            
            const messageHTML = `
                <div class="message ${type}">
                    <div class="message-avatar">${avatar}</div>
                    <div class="message-content">
                        <strong>${name}</strong>
                        <p>${content}</p>
                    </div>
                </div>
            `;
            
            messagesContainer.insertAdjacentHTML('beforeend', messageHTML);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function showTypingIndicator() {
            const messagesContainer = document.getElementById('chat-messages');
            messagesContainer.insertAdjacentHTML('beforeend', `
                <div class="message ai typing-indicator" id="typing">
                    <div class="message-avatar">ü§ñ</div>
                    <div class="message-content">
                        <strong>Profesor IA</strong>
                        <p>Escribiendo...</p>
                    </div>
                </div>
            `);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function hideTypingIndicator() {
            const typing = document.getElementById('typing');
            if (typing) typing.remove();
        }

        function sendSuggestion(text) {
            document.getElementById('chat-input').value = text;
            sendChatMessage();
        }

        function clearChat() {
            if (confirm('¬øQuieres borrar toda la conversaci√≥n?')) {
                const messagesContainer = document.getElementById('chat-messages');
                messagesContainer.innerHTML = `
                    <div class="message ai">
                        <div class="message-avatar">ü§ñ</div>
                        <div class="message-content">
                            <strong>Profesor IA</strong>
                            <p>¬°Hola! Soy tu profesor de espa√±ol. Podemos practicar conversaci√≥n sobre cualquier tema que te interese. ¬øDe qu√© te gustar√≠a hablar hoy?</p>
                            <div class="message-suggestions">
                                <button onclick="sendSuggestion('Quiero practicar vocabulario de negocios')">üíº Negocios</button>
                                <button onclick="sendSuggestion('Vamos a hablar sobre viajes')">‚úàÔ∏è Viajes</button>
                                <button onclick="sendSuggestion('Ay√∫dame con el subjuntivo')">üìö Gram√°tica</button>
                            </div>
                        </div>
                    </div>
                `;
                chatHistory = [];
            }
        }

        function showAPIInstructions() {
            alert(`Como configurar a API do Claude:

1. Acesse: https://console.anthropic.com
2. Crie uma conta (se ainda n√£o tiver)
3. V√° em "API Keys"
4. Clique em "Create Key"
5. Copie a chave (come√ßa com sk-ant-...)
6. Abra o arquivo dashboard.html em um editor
7. Procure por "ANTHROPIC_API_KEY"
8. Cole sua chave no lugar de "SUA_CHAVE_API_AQUI"
9. Salve o arquivo

Custo: ~$0.003 por mensagem (muito barato!)

Mais detalhes no README.md`);
        }

        // ==============================================
        // VIDEOAULAS - ORGANIZADAS POR N√çVEL
        // ==============================================
        
        const videosData = [
            // ==================== N√çVEL A2 ====================
            {
                id: 1,
                title: 'Alfabeto Espanhol - Pron√∫ncia Correta',
                category: 'pronuncia',
                level: 'A2',
                duration: '08:45',
                thumbnail: 'üî§',
                description: 'Aprenda a pronunciar corretamente todas as letras do alfabeto espanhol',
                url: 'https://www.youtube.com/embed/aahcX7bl3Gs'
            },
            {
                id: 2,
                title: 'Diferen√ßa entre SER e ESTAR - Para Brasileiros',
                category: 'gramatica',
                level: 'A2',
                duration: '12:30',
                thumbnail: 'üìò',
                description: 'Entenda de uma vez por todas quando usar SER e quando usar ESTAR',
                url: 'https://www.youtube.com/embed/DHLSZiKoKRg'
            },
            {
                id: 3,
                title: 'Vocabul√°rio B√°sico - 100 Palavras Essenciais',
                category: 'vocabulario',
                level: 'A2',
                duration: '15:20',
                thumbnail: 'üìù',
                description: 'As 100 palavras mais importantes para come√ßar a falar espanhol',
                url: 'https://www.youtube.com/embed/TX6kK5UKefk'
            },
            {
                id: 4,
                title: 'Pron√∫ncia do RR - Truque Definitivo',
                category: 'pronuncia',
                level: 'A2',
                duration: '09:15',
                thumbnail: 'üó£Ô∏è',
                description: 'T√©cnicas pr√°ticas para brasileiros dominarem o RR forte',
                url: 'https://www.youtube.com/embed/aahcX7bl3Gs'
            },
            {
                id: 5,
                title: 'Presente do Indicativo - Verbos Regulares',
                category: 'gramatica',
                level: 'A2',
                duration: '14:00',
                thumbnail: '‚è∞',
                description: 'Conjuga√ß√£o completa dos verbos regulares no presente',
                url: 'https://www.youtube.com/embed/piciI4L2ZO8'
            },
            {
                id: 6,
                title: 'Sauda√ß√µes e Apresenta√ß√µes em Espanhol',
                category: 'vocabulario',
                level: 'A2',
                duration: '10:30',
                thumbnail: 'üëã',
                description: 'Como se apresentar e cumprimentar em diferentes situa√ß√µes',
                url: 'https://www.youtube.com/embed/TX6kK5UKefk'
            },
            {
                id: 7,
                title: 'N√∫meros e Datas em Espanhol',
                category: 'vocabulario',
                level: 'A2',
                duration: '11:45',
                thumbnail: 'üî¢',
                description: 'N√∫meros de 0 a 1000, horas, dias da semana e meses',
                url: 'https://www.youtube.com/embed/TX6kK5UKefk'
            },
            {
                id: 8,
                title: 'Verbos TENER e HACER - Essenciais',
                category: 'gramatica',
                level: 'A2',
                duration: '13:20',
                thumbnail: '‚úçÔ∏è',
                description: 'Domine os dois verbos irregulares mais usados no espanhol',
                url: 'https://www.youtube.com/embed/piciI4L2ZO8'
            },

            // ==================== N√çVEL B1 ====================
            {
                id: 9,
                title: 'Pret√©rito Indefinido - Como Usar',
                category: 'gramatica',
                level: 'B1',
                duration: '18:45',
                thumbnail: '‚èÆÔ∏è',
                description: 'Aprenda o passado mais usado no espanhol do zero',
                url: 'https://www.youtube.com/embed/UPozvRIakk4'
            },
            {
                id: 10,
                title: 'Vocabul√°rio de Neg√≥cios em Espanhol',
                category: 'vocabulario',
                level: 'B1',
                duration: '20:30',
                thumbnail: 'üíº',
                description: 'Vocabul√°rio essencial para reuni√µes, emails e apresenta√ß√µes',
                url: 'https://www.youtube.com/embed/TX6kK5UKefk'
            },
            {
                id: 11,
                title: 'Subjuntivo Presente - Do Zero',
                category: 'gramatica',
                level: 'B1',
                duration: '22:00',
                thumbnail: 'üìö',
                description: 'Primeiros passos no subjuntivo: quando e como usar',
                url: 'https://www.youtube.com/embed/xaq7arAgZs4'
            },
            {
                id: 12,
                title: 'POR vs PARA - Regras Definitivas',
                category: 'gramatica',
                level: 'B1',
                duration: '16:30',
                thumbnail: 'üîÄ',
                description: 'Todas as regras e exce√ß√µes de POR e PARA com exemplos pr√°ticos',
                url: 'https://www.youtube.com/embed/RfMRC-y9LxQ'
            },
            {
                id: 13,
                title: 'Falsos Amigos Espanhol-Portugu√™s',
                category: 'vocabulario',
                level: 'B1',
                duration: '17:15',
                thumbnail: '‚ö†Ô∏è',
                description: 'Palavras que parecem iguais mas significam coisas diferentes',
                url: 'https://www.youtube.com/embed/Auc9AluZK3Y'
            },
            {
                id: 14,
                title: 'Espanhol no Restaurante - Di√°logos Reais',
                category: 'vocabulario',
                level: 'B1',
                duration: '12:40',
                thumbnail: 'üçΩÔ∏è',
                description: 'Como fazer pedidos, reclamar educadamente e pedir a conta',
                url: 'https://www.youtube.com/embed/TX6kK5UKefk'
            },
            {
                id: 15,
                title: 'Cultura Hisp√¢nica - O que Voc√™ Precisa Saber',
                category: 'cultura',
                level: 'B1',
                duration: '19:00',
                thumbnail: 'üé≠',
                description: 'Principais festas, costumes e diferen√ßas culturais hisp√¢nicas',
                url: 'https://www.youtube.com/embed/Auc9AluZK3Y'
            },
            {
                id: 16,
                title: 'Pret√©rito Imperfecto - Usos e Formas',
                category: 'gramatica',
                level: 'B1',
                duration: '14:50',
                thumbnail: 'üåé',
                description: 'Quando usar o imperfeito e diferen√ßa com o indefinido',
                url: 'https://www.youtube.com/embed/UPozvRIakk4'
            },

            // ==================== N√çVEL B1+ ====================
            {
                id: 17,
                title: 'Subjuntivo - Usos Avan√ßados',
                category: 'gramatica',
                level: 'B1_plus',
                duration: '24:15',
                thumbnail: 'üìñ',
                description: 'Express√µes com subjuntivo e casos especiais',
                url: 'https://www.youtube.com/embed/xaq7arAgZs4'
            },
            {
                id: 18,
                title: 'Express√µes Idiom√°ticas do Espanhol',
                category: 'vocabulario',
                level: 'B1_plus',
                duration: '16:20',
                thumbnail: 'üí¨',
                description: '30 express√µes idiom√°ticas que nativos usam todo dia',
                url: 'https://www.youtube.com/embed/Auc9AluZK3Y'
            },
            {
                id: 19,
                title: 'Espanhol Coloquial - G√≠rias e Express√µes',
                category: 'vocabulario',
                level: 'B1_plus',
                duration: '18:00',
                thumbnail: 'üó®Ô∏è',
                description: 'Express√µes coloquiais aut√™nticas do espanhol falado',
                url: 'https://www.youtube.com/embed/TX6kK5UKefk'
            },
            {
                id: 20,
                title: 'Entrevista de Emprego em Espanhol',
                category: 'vocabulario',
                level: 'B1_plus',
                duration: '21:30',
                thumbnail: 'üëî',
                description: 'Como responder perguntas comuns e se destacar',
                url: 'https://www.youtube.com/embed/RfMRC-y9LxQ'
            },
            {
                id: 21,
                title: 'Conectores Discursivos em Espanhol',
                category: 'gramatica',
                level: 'B1_plus',
                duration: '15:45',
                thumbnail: 'üîó',
                description: 'Palavras de liga√ß√£o para soar mais natural e fluente',
                url: 'https://www.youtube.com/embed/xaq7arAgZs4'
            },
            {
                id: 22,
                title: 'Imperativo em Espanhol - Completo',
                category: 'gramatica',
                level: 'B1_plus',
                duration: '19:20',
                thumbnail: 'üéØ',
                description: 'Como dar ordens e instru√ß√µes em espanhol corretamente',
                url: 'https://www.youtube.com/embed/piciI4L2ZO8'
            },
            {
                id: 23,
                title: 'Pronomes Relativos - Que, Quien, Cual',
                category: 'gramatica',
                level: 'B1_plus',
                duration: '20:00',
                thumbnail: 'üìú',
                description: 'Como usar pronomes relativos para frases mais elaboradas',
                url: 'https://www.youtube.com/embed/DHLSZiKoKRg'
            },

            // ==================== N√çVEL B2 ====================
            {
                id: 24,
                title: 'Subjuntivo Imperfecto - Dom√≠nio Total',
                category: 'gramatica',
                level: 'B2',
                duration: '26:40',
                thumbnail: 'üéì',
                description: 'Imperfecto de subjuntivo e todos os seus usos avan√ßados',
                url: 'https://www.youtube.com/embed/xaq7arAgZs4'
            },
            {
                id: 25,
                title: 'Condicional Composto em Espanhol',
                category: 'gramatica',
                level: 'B2',
                duration: '22:50',
                thumbnail: 'üìß',
                description: 'Hip√≥teses no passado - estruturas avan√ßadas',
                url: 'https://www.youtube.com/embed/DHLSZiKoKRg'
            },
            {
                id: 26,
                title: 'Vocabul√°rio Avan√ßado de Neg√≥cios',
                category: 'vocabulario',
                level: 'B2',
                duration: '25:15',
                thumbnail: '‚öñÔ∏è',
                description: 'Termos profissionais para contextos corporativos exigentes',
                url: 'https://www.youtube.com/embed/TX6kK5UKefk'
            },
            {
                id: 27,
                title: 'Debate e Argumenta√ß√£o em Espanhol',
                category: 'gramatica',
                level: 'B2',
                duration: '23:30',
                thumbnail: 'üó£Ô∏è',
                description: 'Estruturas para debater, concordar e discordar formalmente',
                url: 'https://www.youtube.com/embed/RfMRC-y9LxQ'
            },
            {
                id: 28,
                title: 'Per√≠frases Verbais Avan√ßadas',
                category: 'gramatica',
                level: 'B2',
                duration: '28:00',
                thumbnail: 'üìö',
                description: 'Ir a, Acabar de, Estar + ger√∫ndio e outras per√≠frases essenciais',
                url: 'https://www.youtube.com/embed/piciI4L2ZO8'
            },
            {
                id: 29,
                title: 'Ora√ß√µes Subordinadas Avan√ßadas',
                category: 'gramatica',
                level: 'B2',
                duration: '24:20',
                thumbnail: '‚ö°',
                description: 'Frases complexas com subordinadas causais, concesivas e m√°s',
                url: 'https://www.youtube.com/embed/xaq7arAgZs4'
            },
            {
                id: 30,
                title: 'Espanhol para Apresenta√ß√µes Profissionais',
                category: 'vocabulario',
                level: 'B2',
                duration: '21:40',
                thumbnail: 'üìä',
                description: 'Como fazer apresenta√ß√µes corporativas de alto n√≠vel',
                url: 'https://www.youtube.com/embed/RfMRC-y9LxQ'
            },
            {
                id: 31,
                title: 'Variedades do Espanhol no Mundo',
                category: 'pronuncia',
                level: 'B2',
                duration: '27:15',
                thumbnail: 'üåç',
                description: 'Diferen√ßas entre espanhol da Espanha, M√©xico, Argentina e mais',
                url: 'https://www.youtube.com/embed/aahcX7bl3Gs'
            },
            {
                id: 32,
                title: 'Espanhol Liter√°rio e Formal',
                category: 'vocabulario',
                level: 'B2',
                duration: '26:00',
                thumbnail: 'üí∞',
                description: 'Vocabul√°rio elevado para textos formais e liter√°rios',
                url: 'https://www.youtube.com/embed/Auc9AluZK3Y'
            }
        ];

        function loadVideos(filter = 'all') {
            // Usa a nova fun√ß√£o filtrada
            loadVideosFiltered();
        }

        function filterVideos(category) {
            // Mantido para compatibilidade, mas usa a nova fun√ß√£o
            filterVideosByCategory(category);
        }

        function playVideo(videoId) {
            const video = videosData.find(v => v.id === videoId);
            if (!video) return;

            const existing = document.getElementById('video-modal');
            if (existing) existing.remove();

            const modal = document.createElement('div');
            modal.id = 'video-modal';
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.95); z-index: 9999;
                display: flex; flex-direction: column;
                align-items: center; justify-content: center;
                padding: 1rem; animation: fadeIn 0.2s ease;
            `;

            modal.innerHTML = `
                <style>@keyframes fadeIn { from { opacity:0; transform:scale(0.97); } to { opacity:1; transform:scale(1); } }</style>
                <div style="width:100%; max-width:960px;">
                    <div style="display:flex; justify-content:space-between; align-items:flex-start; margin-bottom:0.8rem;">
                        <div>
                            <div style="display:flex; gap:0.5rem; margin-bottom:0.4rem;">
                                <span style="background:linear-gradient(135deg,#FF6B35,#FEC601); color:#0F0F1E; padding:0.3rem 0.8rem; border-radius:20px; font-weight:700; font-size:0.8rem;">${video.level === 'B1_plus' ? 'B1+' : video.level}</span>
                                <span style="background:rgba(255,255,255,0.1); color:#9E9E9E; padding:0.3rem 0.8rem; border-radius:20px; font-size:0.8rem;">‚è±Ô∏è ${video.duration}</span>
                            </div>
                            <h2 style="font-family:'Bebas Neue',cursive; font-size:1.5rem; letter-spacing:1px; color:white; margin-bottom:0.2rem;">${video.title}</h2>
                            <p style="color:#9E9E9E; font-size:0.88rem;">${video.description}</p>
                        </div>
                        <button onclick="closeVideoModal()" style="background:rgba(255,255,255,0.1); border:none; color:white; font-size:1.2rem; width:40px; height:40px; border-radius:50%; cursor:pointer; flex-shrink:0; margin-left:1rem; transition:all 0.2s;" onmouseover="this.style.background='#FF6B35'" onmouseout="this.style.background='rgba(255,255,255,0.1)'">‚úï</button>
                    </div>

                    <div style="position:relative; padding-bottom:56.25%; height:0; overflow:hidden; border-radius:14px; border:2px solid rgba(255,107,53,0.4); background:#000;">
                        <iframe
                            src="${video.url}?autoplay=1&rel=0&modestbranding=1&color=white&iv_load_policy=3&showinfo=0"
                            style="position:absolute; top:0; left:0; width:100%; height:100%; border:none;"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                            allowfullscreen>
                        </iframe>
                    </div>

                    <div style="display:flex; justify-content:flex-end; margin-top:0.8rem;">
                        <button onclick="closeVideoModal()" style="background:rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.1); color:#9E9E9E; padding:0.6rem 1.5rem; border-radius:8px; cursor:pointer; font-size:0.9rem;" onmouseover="this.style.background='rgba(255,255,255,0.1)'" onmouseout="this.style.background='rgba(255,255,255,0.05)'">‚úï Fechar</button>
                    </div>
                </div>
            `;

            modal.addEventListener('click', (e) => { if (e.target === modal) closeVideoModal(); });
            document.body.appendChild(modal);
            document.body.style.overflow = 'hidden';

            updateXP(20);
            showAchievement('üé• Videoaula assistida! +20 XP');
        }

        function closeVideoModal() {
            const modal = document.getElementById('video-modal');
            if (modal) { modal.remove(); document.body.style.overflow = ''; }
        }

        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeVideoModal(); });

        // ==============================================
        // EXERC√çCIOS DE √ÅUDIO (LISTENING) - POR N√çVEL
        // ==============================================
        
        const audioExercises = [
            // ==================== N√çVEL A2 ====================
            {
                id: 1,
                title: 'Apresenta√ß√£o Pessoal',
                level: 'A2',
                audioText: 'Hola, me llamo Mar√≠a. Tengo veinticinco a√±os y soy de Brasil. Vivo en S√£o Paulo y trabajo como profesora de ingl√©s.',
                questions: [
                    {
                        question: '¬øC√≥mo se llama la persona?',
                        options: ['Laura', 'Mar√≠a', 'Ana', 'Carmen'],
                        correct: 1
                    },
                    {
                        question: '¬øCu√°ntos a√±os tiene?',
                        options: ['15', '20', '25', '30'],
                        correct: 2
                    },
                    {
                        question: '¬øCu√°l es su profesi√≥n?',
                        options: ['M√©dica', 'Ingeniera', 'Profesora', 'Estudiante'],
                        correct: 2
                    }
                ]
            },
            {
                id: 2,
                title: 'En el Supermercado',
                level: 'A2',
                audioText: 'Buenos d√≠as. Necesito un kilo de manzanas, dos litros de leche y medio kilo de queso. ¬øCu√°nto cuesta en total?',
                questions: [
                    {
                        question: '¬øQu√© fruta quiere comprar?',
                        options: ['Naranjas', 'Peras', 'Manzanas', 'Pl√°tanos'],
                        correct: 2
                    },
                    {
                        question: '¬øCu√°nta leche necesita?',
                        options: ['1 litro', '2 litros', '3 litros', 'Medio litro'],
                        correct: 1
                    }
                ]
            },
            {
                id: 3,
                title: 'Reserva de Hotel',
                level: 'A2',
                audioText: 'Buenas tardes. Quiero reservar una habitaci√≥n doble para dos noches. Llegaremos el viernes quince de marzo.',
                questions: [
                    {
                        question: '¬øQu√© tipo de habitaci√≥n quiere?',
                        options: ['Individual', 'Doble', 'Triple', 'Suite'],
                        correct: 1
                    },
                    {
                        question: '¬øPara cu√°ntas noches?',
                        options: ['Una', 'Dos', 'Tres', 'Cuatro'],
                        correct: 1
                    }
                ]
            },
            {
                id: 4,
                title: 'Pedir Direcciones',
                level: 'A2',
                audioText: 'Perdone, ¬ød√≥nde est√° la estaci√≥n de metro m√°s cercana? Siga recto dos cuadras y gire a la izquierda. Est√° al lado del banco.',
                questions: [
                    {
                        question: '¬øQu√© busca la persona?',
                        options: ['Banco', 'Farmacia', 'Estaci√≥n de metro', 'Hospital'],
                        correct: 2
                    },
                    {
                        question: '¬øD√≥nde est√° la estaci√≥n?',
                        options: ['A la derecha', 'Al lado del banco', 'Enfrente', 'Lejos'],
                        correct: 1
                    }
                ]
            },
            {
                id: 5,
                title: 'En el Restaurante',
                level: 'A2',
                audioText: 'Para m√≠, de primero una ensalada mixta. De segundo, el pescado al horno con patatas. Y para beber, agua sin gas.',
                questions: [
                    {
                        question: '¬øQu√© pidi√≥ de primero?',
                        options: ['Sopa', 'Ensalada mixta', 'Pasta', 'Arroz'],
                        correct: 1
                    },
                    {
                        question: '¬øQu√© va a beber?',
                        options: ['Vino', 'Cerveza', 'Agua con gas', 'Agua sin gas'],
                        correct: 3
                    }
                ]
            },
            {
                id: 6,
                title: 'Conversaci√≥n Telef√≥nica',
                level: 'A2',
                audioText: '¬øDiga? Hola, soy Carlos. ¬øEst√° Ana? No, lo siento, no est√° en casa. ¬øQuieres dejar un mensaje?',
                questions: [
                    {
                        question: '¬øQui√©n llama?',
                        options: ['Ana', 'Carlos', 'Mar√≠a', 'Pedro'],
                        correct: 1
                    },
                    {
                        question: '¬øAna est√° en casa?',
                        options: ['S√≠', 'No', 'No se sabe', 'Est√° durmiendo'],
                        correct: 1
                    }
                ]
            },
            {
                id: 7,
                title: 'El Clima',
                level: 'A2',
                audioText: 'Hoy hace mucho calor. La temperatura m√°xima ser√° de treinta y cinco grados. Se recomienda beber mucha agua y evitar el sol entre las doce y las cuatro.',
                questions: [
                    {
                        question: '¬øQu√© tiempo hace?',
                        options: ['Fr√≠o', 'Lluvia', 'Calor', 'Nieve'],
                        correct: 2
                    },
                    {
                        question: '¬øCu√°l es la temperatura m√°xima?',
                        options: ['25 grados', '30 grados', '35 grados', '40 grados'],
                        correct: 2
                    }
                ]
            },
            {
                id: 8,
                title: 'Horarios de Trabajo',
                level: 'A2',
                audioText: 'Trabajo de lunes a viernes, de nueve de la ma√±ana a seis de la tarde. Los fines de semana no trabajo. Tengo media hora para almorzar.',
                questions: [
                    {
                        question: '¬øCu√°ntos d√≠as trabaja por semana?',
                        options: ['4', '5', '6', '7'],
                        correct: 1
                    },
                    {
                        question: '¬øCu√°nto tiempo tiene para almorzar?',
                        options: ['15 minutos', '30 minutos', '1 hora', '2 horas'],
                        correct: 1
                    }
                ]
            },
            {
                id: 9,
                title: 'La Familia',
                level: 'A2',
                audioText: 'Tengo dos hermanos mayores y una hermana peque√±a. Mis padres viven en el campo. Yo vivo en la ciudad con mi esposa y nuestros dos hijos.',
                questions: [
                    {
                        question: '¬øCu√°ntos hermanos tiene en total?',
                        options: ['2', '3', '4', '5'],
                        correct: 1
                    },
                    {
                        question: '¬øD√≥nde viven sus padres?',
                        options: ['En la ciudad', 'En el campo', 'En la playa', 'En el extranjero'],
                        correct: 1
                    }
                ]
            },
            {
                id: 10,
                title: 'Comprar Ropa',
                level: 'A2',
                audioText: 'Busco una camisa azul, talla mediana. ¬øTienen esta en otro color? S√≠, tambi√©n la tenemos en blanco y en negro. Me llevo la azul y la blanca.',
                questions: [
                    {
                        question: '¬øQu√© prenda busca?',
                        options: ['Pantal√≥n', 'Camisa', 'Zapatos', 'Chaqueta'],
                        correct: 1
                    },
                    {
                        question: '¬øCu√°ntas compra al final?',
                        options: ['1', '2', '3', 'Ninguna'],
                        correct: 1
                    }
                ]
            },
            
            // ==================== N√çVEL B1 ====================
            {
                id: 11,
                title: 'Conversaci√≥n en el Aeropuerto',
                level: 'B1',
                audioText: 'Buenos d√≠as. Necesito facturar mi equipaje para el vuelo a Madrid. Aqu√≠ est√° mi pasaporte y el billete. ¬øPrefiere ventana o pasillo? Ventana, por favor.',
                questions: [
                    {
                        question: '¬øAd√≥nde va la persona?',
                        options: ['Barcelona', 'Madrid', 'Buenos Aires', 'M√©xico'],
                        correct: 1
                    },
                    {
                        question: '¬øQu√© tipo de asiento prefiere?',
                        options: ['Pasillo', 'Ventana', 'Centro', 'No importa'],
                        correct: 1
                    }
                ]
            },
            {
                id: 12,
                title: 'Reuni√≥n de Negocios',
                level: 'B1',
                audioText: 'Seg√∫n el √∫ltimo informe, nuestras ventas aumentaron un quince por ciento este trimestre. Propongo que invirtamos estos beneficios en marketing digital para el pr√≥ximo per√≠odo.',
                questions: [
                    {
                        question: '¬øCu√°nto aumentaron las ventas?',
                        options: ['5%', '10%', '15%', '20%'],
                        correct: 2
                    },
                    {
                        question: '¬øQu√© propone el hablante?',
                        options: ['Reducir costos', 'Invertir en marketing', 'Contratar personal', 'Abrir tienda'],
                        correct: 1
                    }
                ]
            },
            {
                id: 13,
                title: 'Conversaci√≥n en Restaurante',
                level: 'B1',
                audioText: '¬øQu√© me recomienda de primero? Me gustar√≠a algo ligero. Le sugiero la ensalada de la casa o la crema de verduras. Tomar√© la ensalada. Para beber, agua con gas.',
                questions: [
                    {
                        question: '¬øQu√© tipo de plato prefiere?',
                        options: ['Pesado', 'Ligero', 'Dulce', 'Picante'],
                        correct: 1
                    },
                    {
                        question: '¬øQu√© pidi√≥ de primero?',
                        options: ['Crema', 'Ensalada', 'Sopa', 'Pasta'],
                        correct: 1
                    }
                ]
            },
            {
                id: 14,
                title: 'Noticia - Medio Ambiente',
                level: 'B1',
                audioText: 'Las temperaturas globales contin√∫an subiendo. Los cient√≠ficos advierten que es necesario reducir las emisiones de carbono urgentemente para evitar consecuencias irreversibles.',
                questions: [
                    {
                        question: '¬øQu√© est√° pasando con las temperaturas?',
                        options: ['Bajando', 'Estables', 'Subiendo', 'Variando'],
                        correct: 2
                    },
                    {
                        question: '¬øQu√© recomiendan los cient√≠ficos?',
                        options: ['Esperar', 'Reducir emisiones', 'Plantar √°rboles', 'Usar m√°s energ√≠a'],
                        correct: 1
                    }
                ]
            },
            {
                id: 15,
                title: 'Consulta M√©dica',
                level: 'B1',
                audioText: 'Doctor, desde hace una semana tengo dolor de cabeza constante y me siento muy cansado. ¬øHa tenido fiebre? No, pero duermo mal por las noches.',
                questions: [
                    {
                        question: '¬øCu√°l es el s√≠ntoma principal?',
                        options: ['Fiebre', 'Dolor de cabeza', 'Tos', 'N√°useas'],
                        correct: 1
                    },
                    {
                        question: '¬øCu√°nto tiempo lleva con los s√≠ntomas?',
                        options: ['2 d√≠as', 'Una semana', 'Un mes', 'Varios meses'],
                        correct: 1
                    }
                ]
            },
            {
                id: 16,
                title: 'Anuncio de Empleo',
                level: 'B1',
                audioText: 'Empresa multinacional busca ingeniero de software con al menos tres a√±os de experiencia. Se requiere ingl√©s avanzado y disponibilidad para viajar. Ofrecemos salario competitivo y beneficios.',
                questions: [
                    {
                        question: '¬øQu√© puesto ofrecen?',
                        options: ['Contador', 'Ingeniero', 'Vendedor', 'Gerente'],
                        correct: 1
                    },
                    {
                        question: '¬øCu√°nta experiencia se requiere?',
                        options: ['Sin experiencia', '1 a√±o', '3 a√±os', '5 a√±os'],
                        correct: 2
                    }
                ]
            },
            {
                id: 17,
                title: 'Reserva de Viaje',
                level: 'B1',
                audioText: 'Quisiera reservar un paquete tur√≠stico a Canc√∫n para dos personas. Preferiblemente con todo incluido. ¬øPara qu√© fechas? Del diez al veinte de julio.',
                questions: [
                    {
                        question: '¬øPara cu√°ntas personas es la reserva?',
                        options: ['1', '2', '3', '4'],
                        correct: 1
                    },
                    {
                        question: '¬øCu√°ntos d√≠as ser√° el viaje?',
                        options: ['5 d√≠as', '7 d√≠as', '10 d√≠as', '15 d√≠as'],
                        correct: 2
                    }
                ]
            },
            {
                id: 18,
                title: 'Conversaci√≥n sobre Hobbies',
                level: 'B1',
                audioText: 'En mi tiempo libre me encanta leer novelas policiacas y hacer senderismo los fines de semana. Tambi√©n toco la guitarra desde hace cinco a√±os.',
                questions: [
                    {
                        question: '¬øQu√© tipo de novelas le gusta?',
                        options: ['Rom√°nticas', 'Policiacas', 'Hist√≥ricas', 'Ciencia ficci√≥n'],
                        correct: 1
                    },
                    {
                        question: '¬øCu√°nto tiempo hace que toca guitarra?',
                        options: ['2 a√±os', '5 a√±os', '10 a√±os', '15 a√±os'],
                        correct: 1
                    }
                ]
            },
            {
                id: 19,
                title: 'Problema T√©cnico',
                level: 'B1',
                audioText: 'Mi computadora se apag√≥ de repente y ahora no enciende. He intentado conectarla a diferentes enchufes pero nada funciona. ¬øCrees que es un problema de la bater√≠a?',
                questions: [
                    {
                        question: '¬øQu√© le pas√≥ a la computadora?',
                        options: ['Se moj√≥', 'No enciende', 'Est√° lenta', 'Tiene virus'],
                        correct: 1
                    },
                    {
                        question: '¬øQu√© ha intentado hacer?',
                        options: ['Reiniciar', 'Cambiar enchufes', 'Llamar soporte', 'Comprar nueva'],
                        correct: 1
                    }
                ]
            },
            {
                id: 20,
                title: 'Experiencia de Viaje',
                level: 'B1',
                audioText: 'El a√±o pasado viaj√© por Espa√±a durante un mes. Visit√© Madrid, Barcelona y Sevilla. Lo que m√°s me gust√≥ fue la arquitectura de Gaud√≠ en Barcelona. La comida era deliciosa en todas partes.',
                questions: [
                    {
                        question: '¬øCu√°nto tiempo dur√≥ el viaje?',
                        options: ['Una semana', 'Dos semanas', 'Un mes', 'Dos meses'],
                        correct: 2
                    },
                    {
                        question: '¬øQu√© le gust√≥ m√°s?',
                        options: ['La comida', 'Arquitectura Gaud√≠', 'Las playas', 'Los museos'],
                        correct: 1
                    }
                ]
            },
            
            // ==================== N√çVEL B1+ ====================
            {
                id: 21,
                title: 'Instrucciones de Trabajo',
                level: 'B1_plus',
                audioText: 'Es imprescindible que terminen el informe antes del viernes. Si hubiera alg√∫n problema, no duden en contactarme. Ser√≠a conveniente que revis√°ramos juntos las cifras finales antes de presentarlas.',
                questions: [
                    {
                        question: '¬øCu√°ndo debe estar listo el informe?',
                        options: ['Lunes', 'Mi√©rcoles', 'Viernes', 'Domingo'],
                        correct: 2
                    },
                    {
                        question: '¬øQu√© modo verbal usa principalmente?',
                        options: ['Indicativo', 'Subjuntivo', 'Imperativo', 'Gerundio'],
                        correct: 1
                    }
                ]
            },
            {
                id: 22,
                title: 'Conversaci√≥n Telef√≥nica Profesional',
                level: 'B1_plus',
                audioText: 'Llamaba para confirmar nuestra reuni√≥n de ma√±ana a las diez. ¬øPodr√≠amos posponerla una hora? Tengo otra cita que probablemente se alargue. Por supuesto, entonces nos vemos a las once.',
                questions: [
                    {
                        question: '¬øCu√°l es el prop√≥sito de la llamada?',
                        options: ['Cancelar', 'Confirmar y cambiar hora', 'Invitar', 'Pedir info'],
                        correct: 1
                    },
                    {
                        question: '¬øA qu√© hora ser√° la reuni√≥n finalmente?',
                        options: ['9:00', '10:00', '11:00', '12:00'],
                        correct: 2
                    }
                ]
            },
            {
                id: 23,
                title: 'Debate sobre Tecnolog√≠a',
                level: 'B1_plus',
                audioText: 'Aunque la inteligencia artificial trae muchos beneficios, tambi√©n plantea serios desaf√≠os √©ticos. Es fundamental que establezcamos regulaciones claras antes de que sea demasiado tarde.',
                questions: [
                    {
                        question: '¬øCu√°l es la postura del hablante?',
                        options: ['Totalmente a favor', 'Cauteloso', 'En contra', 'Neutral'],
                        correct: 1
                    },
                    {
                        question: '¬øQu√© propone?',
                        options: ['Prohibir IA', 'Establecer regulaciones', 'Acelerar desarrollo', 'Esperar'],
                        correct: 1
                    }
                ]
            },
            {
                id: 24,
                title: 'Negociaci√≥n Comercial',
                level: 'B1_plus',
                audioText: 'Considerando las circunstancias actuales del mercado, propongo que reduzcamos el precio un diez por ciento. A cambio, nos comprometemos a duplicar el volumen de pedidos en el pr√≥ximo trimestre.',
                questions: [
                    {
                        question: '¬øQu√© propone reducir?',
                        options: ['Personal', 'Precio', 'Producci√≥n', 'Tiempo'],
                        correct: 1
                    },
                    {
                        question: '¬øQu√© ofrecen a cambio?',
                        options: ['Pago anticipado', 'Exclusividad', 'Duplicar pedidos', 'Publicidad'],
                        correct: 2
                    }
                ]
            },
            {
                id: 25,
                title: 'Entrevista de Trabajo',
                level: 'B1_plus',
                audioText: 'Cu√©nteme sobre una situaci√≥n dif√≠cil que haya enfrentado. En mi trabajo anterior, tuvimos que entregar un proyecto con la mitad del equipo enfermo. Reorganic√© las prioridades y trabajamos horas extras, pero lo logramos a tiempo.',
                questions: [
                    {
                        question: '¬øCu√°l fue el problema?',
                        options: ['Falta presupuesto', 'Equipo enfermo', 'Cliente dif√≠cil', 'Poco tiempo'],
                        correct: 1
                    },
                    {
                        question: '¬øCu√°l fue el resultado?',
                        options: ['Fracaso', 'Retraso', '√âxito', 'Cancelaci√≥n'],
                        correct: 2
                    }
                ]
            },
            {
                id: 26,
                title: 'Opini√≥n sobre Educaci√≥n',
                level: 'B1_plus',
                audioText: 'Creo que el sistema educativo deber√≠a adaptarse m√°s a las necesidades individuales. No todos aprendemos de la misma manera. Ser√≠a ideal que hubiera m√°s flexibilidad en los m√©todos de ense√±anza.',
                questions: [
                    {
                        question: '¬øQu√© opina sobre la educaci√≥n actual?',
                        options: ['Perfecta', 'Necesita cambios', 'Muy mala', 'Suficiente'],
                        correct: 1
                    },
                    {
                        question: '¬øQu√© propone?',
                        options: ['M√°s ex√°menes', 'Mayor flexibilidad', 'Menos horas', 'M√°s profesores'],
                        correct: 1
                    }
                ]
            },
            {
                id: 27,
                title: 'Experiencia Cultural',
                level: 'B1_plus',
                audioText: 'Vivir en el extranjero me ha ense√±ado a valorar las diferencias culturales. Al principio fue dif√≠cil adaptarme, pero ahora aprecio tener una perspectiva m√°s amplia del mundo.',
                questions: [
                    {
                        question: '¬øC√≥mo fue la experiencia inicial?',
                        options: ['F√°cil', 'Dif√≠cil', 'Normal', 'Emocionante'],
                        correct: 1
                    },
                    {
                        question: '¬øC√≥mo se siente ahora?',
                        options: ['Arrepentido', 'Igual', 'Agradecido', 'Confundido'],
                        correct: 2
                    }
                ]
            },
            {
                id: 28,
                title: 'Recomendaci√≥n de Producto',
                level: 'B1_plus',
                audioText: 'Este modelo es m√°s caro, pero vale la pena por su durabilidad. Los clientes reportan que dura el doble que las alternativas m√°s econ√≥micas. Adem√°s, tiene garant√≠a extendida de cinco a√±os.',
                questions: [
                    {
                        question: '¬øCu√°l es la principal ventaja?',
                        options: ['Precio bajo', 'Durabilidad', 'Color', 'Tama√±o'],
                        correct: 1
                    },
                    {
                        question: '¬øCu√°nto dura la garant√≠a?',
                        options: ['1 a√±o', '2 a√±os', '5 a√±os', '10 a√±os'],
                        correct: 2
                    }
                ]
            },
            {
                id: 29,
                title: 'Planes Futuros',
                level: 'B1_plus',
                audioText: 'Si consigo el ascenso, me mudar√© a la oficina de Barcelona. Aunque me encanta vivir aqu√≠, es una oportunidad que no puedo rechazar. Mi familia me apoya en la decisi√≥n.',
                questions: [
                    {
                        question: '¬øQu√© necesita para mudarse?',
                        options: ['Dinero', 'Ascenso', 'Permiso', 'Casa'],
                        correct: 1
                    },
                    {
                        question: '¬øC√≥mo reacciona su familia?',
                        options: ['Se opone', 'Apoya', 'Indiferente', 'Triste'],
                        correct: 1
                    }
                ]
            },
            {
                id: 30,
                title: 'Cr√≠tica de Pel√≠cula',
                level: 'B1_plus',
                audioText: 'Aunque el argumento es predecible, la cinematograf√≠a es impresionante. Los actores hacen un trabajo excepcional con un guion limitado. En general, vale la pena verla por el aspecto visual.',
                questions: [
                    {
                        question: '¬øQu√© critica del argumento?',
                        options: ['Confuso', 'Predecible', 'Aburrido', 'Violento'],
                        correct: 1
                    },
                    {
                        question: '¬øQu√© destaca positivamente?',
                        options: ['M√∫sica', 'Guion', 'Cinematograf√≠a', 'Final'],
                        correct: 2
                    }
                ]
            },
            
            // ==================== N√çVEL B2 ====================
            {
                id: 31,
                title: 'An√°lisis Econ√≥mico',
                level: 'B2',
                audioText: 'La inflaci√≥n persistente est√° erosionando el poder adquisitivo de los consumidores. Los bancos centrales se enfrentan al dilema de subir las tasas, lo cual podr√≠a desencadenar una recesi√≥n, o mantenerlas, arriesgando una espiral inflacionaria.',
                questions: [
                    {
                        question: '¬øCu√°l es el principal problema mencionado?',
                        options: ['Desempleo', 'Inflaci√≥n', 'Deuda', 'D√©ficit'],
                        correct: 1
                    },
                    {
                        question: '¬øQu√© dilema enfrentan los bancos centrales?',
                        options: ['Subir o bajar tasas', 'Imprimir dinero', 'Prestar o no', 'Intervenir mercado'],
                        correct: 0
                    }
                ]
            },
            {
                id: 32,
                title: 'Conferencia Acad√©mica',
                level: 'B2',
                audioText: 'Nuestros hallazgos sugieren que existe una correlaci√≥n significativa entre el nivel educativo materno y el rendimiento acad√©mico infantil. Sin embargo, es fundamental considerar variables socioecon√≥micas que podr√≠an estar mediando esta relaci√≥n.',
                questions: [
                    {
                        question: '¬øQu√© encontr√≥ el estudio?',
                        options: ['No hay relaci√≥n', 'Correlaci√≥n significativa', 'Resultados mixtos', 'Datos insuficientes'],
                        correct: 1
                    },
                    {
                        question: '¬øQu√© advierte el investigador?',
                        options: ['Resultados finales', 'Considerar otras variables', 'Replicar estudio', 'Cambiar m√©todo'],
                        correct: 1
                    }
                ]
            },
            {
                id: 33,
                title: 'Debate Pol√≠tico',
                level: 'B2',
                audioText: 'Si bien reconozco los m√©ritos de la propuesta, no puedo respaldarla en su forma actual. Ser√≠a necesario introducir enmiendas sustanciales que garanticen la viabilidad fiscal sin comprometer los servicios esenciales.',
                questions: [
                    {
                        question: '¬øCu√°l es la postura del hablante?',
                        options: ['A favor total', 'A favor con condiciones', 'Neutral', 'En contra total'],
                        correct: 1
                    },
                    {
                        question: '¬øQu√© propone?',
                        options: ['Rechazar todo', 'Introducir enmiendas', 'Aprobar r√°pido', 'Posponer decisi√≥n'],
                        correct: 1
                    }
                ]
            },
            {
                id: 34,
                title: 'Presentaci√≥n Corporativa',
                level: 'B2',
                audioText: 'Ante la disrupci√≥n del mercado, hemos reorientado nuestra estrategia hacia la transformaci√≥n digital. Esto implica no solo la adopci√≥n de nuevas tecnolog√≠as, sino un cambio cultural profundo en toda la organizaci√≥n.',
                questions: [
                    {
                        question: '¬øQu√© ha hecho la empresa?',
                        options: ['Reducir personal', 'Reorientar estrategia', 'Cerrar divisi√≥n', 'Fusionarse'],
                        correct: 1
                    },
                    {
                        question: '¬øQu√© tipo de cambio menciona?',
                        options: ['Solo tecnol√≥gico', 'Solo cultural', 'Tecnol√≥gico y cultural', 'Ninguno'],
                        correct: 2
                    }
                ]
            },
            {
                id: 35,
                title: 'Cr√≠tica Literaria',
                level: 'B2',
                audioText: 'La obra trasciende los l√≠mites del realismo m√°gico tradicional, incorporando elementos posmodernos que cuestionan la naturaleza misma de la narrativa. El autor subvierte las expectativas del lector mediante una estructura fragmentada y perspectivas m√∫ltiples.',
                questions: [
                    {
                        question: '¬øQu√© hace la obra seg√∫n el cr√≠tico?',
                        options: ['Sigue tradici√≥n', 'Trasciende l√≠mites', 'Imita otros', 'Simplifica'],
                        correct: 1
                    },
                    {
                        question: '¬øC√≥mo es la estructura narrativa?',
                        options: ['Lineal', 'Fragmentada', 'Circular', 'Simple'],
                        correct: 1
                    }
                ]
            },
            {
                id: 36,
                title: 'Dilema √âtico',
                level: 'B2',
                audioText: 'Los avances en edici√≥n gen√©tica plantean interrogantes √©ticos fundamentales. Aunque la tecnolog√≠a podr√≠a erradicar enfermedades hereditarias, tambi√©n abre la puerta a la modificaci√≥n de caracter√≠sticas no m√©dicas, lo cual genera preocupaciones sobre la desigualdad y la eugenesia.',
                questions: [
                    {
                        question: '¬øCu√°l es el beneficio potencial?',
                        options: ['Hacer clones', 'Erradicar enfermedades', 'Vivir m√°s', 'Ser m√°s inteligentes'],
                        correct: 1
                    },
                    {
                        question: '¬øQu√© preocupaci√≥n menciona?',
                        options: ['Costos', 'Desigualdad y eugenesia', 'Religi√≥n', 'Efectos secundarios'],
                        correct: 1
                    }
                ]
            },
            {
                id: 37,
                title: 'An√°lisis Geopol√≠tico',
                level: 'B2',
                audioText: 'El reordenamiento del equilibrio de poder global est√° redefiniendo las alianzas tradicionales. Los estados emergen como actores no estatales ganan influencia, desafiando el orden internacional establecido desde la posguerra.',
                questions: [
                    {
                        question: '¬øQu√© est√° pasando seg√∫n el an√°lisis?',
                        options: ['Estabilidad', 'Reordenamiento poder', 'Guerra fr√≠a', 'Paz mundial'],
                        correct: 1
                    },
                    {
                        question: '¬øQui√©nes ganan influencia?',
                        options: ['Solo estados', 'Actores no estatales', 'ONU', 'Ninguno'],
                        correct: 1
                    }
                ]
            },
            {
                id: 38,
                title: 'Filosof√≠a del Lenguaje',
                level: 'B2',
                audioText: 'El lenguaje no solo describe la realidad, sino que la constituye. Las palabras que empleamos moldean nuestra percepci√≥n y, por ende, nuestra experiencia del mundo. Esta perspectiva desaf√≠a la noci√≥n de una realidad objetiva independiente del observador.',
                questions: [
                    {
                        question: '¬øQu√© papel tiene el lenguaje?',
                        options: ['Solo describe', 'Constituye realidad', 'No importa', 'Confunde'],
                        correct: 1
                    },
                    {
                        question: '¬øQu√© desaf√≠a esta perspectiva?',
                        options: ['Gram√°tica', 'Realidad objetiva', 'Diccionarios', 'Escritura'],
                        correct: 1
                    }
                ]
            },
            {
                id: 39,
                title: 'Cr√≠tica de Arte Contempor√°neo',
                level: 'B2',
                audioText: 'La instalaci√≥n deconstruye las nociones convencionales de espacio y tiempo. Al integrar medios digitales con elementos f√≠sicos, el artista cuestiona la dicotom√≠a entre lo virtual y lo tangible, invitando al espectador a reconsiderar su relaci√≥n con la tecnolog√≠a.',
                questions: [
                    {
                        question: '¬øQu√© deconstruye la obra?',
                        options: ['Colores', 'Espacio y tiempo', 'Materiales', 'P√∫blico'],
                        correct: 1
                    },
                    {
                        question: '¬øQu√© dicotom√≠a cuestiona?',
                        options: ['Bien y mal', 'Virtual y tangible', 'Arte y ciencia', 'Pasado y futuro'],
                        correct: 1
                    }
                ]
            },
            {
                id: 40,
                title: 'Discurso sobre Cambio Clim√°tico',
                level: 'B2',
                audioText: 'No podemos seguir posponiendo acciones decisivas. La ventana de oportunidad se est√° cerrando r√°pidamente. Necesitamos una transformaci√≥n sist√©mica que abarque no solo la energ√≠a, sino tambi√©n la agricultura, el transporte y los patrones de consumo. Las medidas graduales ya no son suficientes.',
                questions: [
                    {
                        question: '¬øCu√°l es el tono del discurso?',
                        options: ['Optimista', 'Urgente', 'Neutral', 'Pesimista'],
                        correct: 1
                    },
                    {
                        question: '¬øQu√© tipo de cambio propone?',
                        options: ['Gradual', 'Sist√©mico', 'Peque√±o', 'Tecnol√≥gico solo'],
                        correct: 1
                    }
                ]
            }
        ];

        function loadAudioExercises() {
            // Usa a nova fun√ß√£o filtrada
            loadAudioExercisesFiltered();
        }

        let audioAnswers = {};

        function playAudio(idx) {
            const exercise = audioExercises[idx];
            
            // Cancela qualquer √°udio em reprodu√ß√£o
            speechSynthesis.cancel();
            
            // Bot√£o de loading
            const btn = document.querySelector(`[onclick="playAudio(${idx})"]`);
            if (btn) {
                btn.innerHTML = '‚è≥ Carregando...';
                btn.disabled = true;
            }

            const utterance = new SpeechSynthesisUtterance(exercise.audioText);
            utterance.lang = 'es-ES';
            utterance.rate = 0.85;
            utterance.pitch = 1;
            utterance.volume = 1;

            // Tenta usar voz em espanhol se dispon√≠vel
            const voices = speechSynthesis.getVoices();
            const spanishVoice = voices.find(v => v.lang.startsWith('es'));
            if (spanishVoice) utterance.voice = spanishVoice;

            utterance.onstart = () => {
                if (btn) {
                    btn.innerHTML = '‚èπÔ∏è Parar';
                    btn.disabled = false;
                    btn.onclick = () => { speechSynthesis.cancel(); btn.innerHTML = '‚ñ∂Ô∏è Ouvir'; btn.onclick = () => playAudio(idx); };
                }
                showAchievement('üîä Reproduzindo √°udio em espanhol!');
            };

            utterance.onend = () => {
                if (btn) {
                    btn.innerHTML = '‚ñ∂Ô∏è Ouvir';
                    btn.disabled = false;
                    btn.onclick = () => playAudio(idx);
                }
            };

            utterance.onerror = () => {
                if (btn) {
                    btn.innerHTML = '‚ñ∂Ô∏è Ouvir';
                    btn.disabled = false;
                }
            };

            speechSynthesis.speak(utterance);
        }

        function toggleTranscript(idx) {
            const transcript = document.getElementById(`transcript-${idx}`);
            transcript.classList.toggle('show');
        }

        function selectAudioOption(exerciseIdx, questionIdx, optionIdx) {
            const key = `${exerciseIdx}-${questionIdx}`;
            audioAnswers[key] = optionIdx;
            
            // Clear previous selections
            document.querySelectorAll(`[data-exercise="${exerciseIdx}"][data-question="${questionIdx}"]`)
                .forEach(opt => opt.classList.remove('selected'));
            
            // Mark new selection
            document.querySelector(`[data-exercise="${exerciseIdx}"][data-question="${questionIdx}"][data-option="${optionIdx}"]`)
                .classList.add('selected');
        }

        function checkAudioAnswers(exerciseIdx) {
            const exercise = audioExercises[exerciseIdx];
            let correctCount = 0;
            
            exercise.questions.forEach((q, qIdx) => {
                const key = `${exerciseIdx}-${qIdx}`;
                const userAnswer = audioAnswers[key];
                const options = document.querySelectorAll(`[data-exercise="${exerciseIdx}"][data-question="${qIdx}"]`);
                
                options.forEach(opt => {
                    opt.classList.remove('correct', 'incorrect');
                });
                
                if (userAnswer !== undefined) {
                    options[q.correct].classList.add('correct');
                    
                    if (userAnswer === q.correct) {
                        correctCount++;
                    } else {
                        options[userAnswer].classList.add('incorrect');
                    }
                }
            });
            
            const percentage = Math.round((correctCount / exercise.questions.length) * 100);
            const xpEarned = correctCount * 30;
            
            if (percentage >= 70) {
                showAchievement(`Exerc√≠cio de listening completo! +${xpEarned} XP`);
                updateXP(xpEarned);
            }
            
            alert(`Resultado: ${correctCount}/${exercise.questions.length} corretas (${percentage}%)\n\n${percentage >= 70 ? '¬°Excelente! üéâ' : '¬°Sigue practicando! üí™'}`);
        }

        // Load videos and audio on init
        setTimeout(() => {
            loadVideos();
            loadAudioExercises();
        }, 100);

        // Video Filters
        let currentVideoLevel = 'all';
        let currentVideoCategory = 'all';

        function filterVideosByLevel(level) {
            currentVideoLevel = level;
            document.querySelectorAll('.video-filters button').forEach(btn => {
                if (btn.textContent.includes(level) || (level === 'all' && btn.textContent === 'Todos')) {
                    btn.classList.add('active');
                } else if (btn.onclick && btn.onclick.toString().includes('filterVideosByLevel')) {
                    btn.classList.remove('active');
                }
            });
            loadVideosFiltered();
        }

        function filterVideosByCategory(category) {
            currentVideoCategory = category;
            document.querySelectorAll('.video-filters button').forEach(btn => {
                if (btn.textContent.toLowerCase().includes(category) || (category === 'all' && btn.textContent === 'Todos')) {
                    btn.classList.add('active');
                } else if (btn.onclick && btn.onclick.toString().includes('filterVideosByCategory')) {
                    btn.classList.remove('active');
                }
            });
            loadVideosFiltered();
        }

        function loadVideosFiltered() {
            let filtered = videosData;
            
            if (currentVideoLevel !== 'all') {
                filtered = filtered.filter(v => v.level === currentVideoLevel);
            }
            
            if (currentVideoCategory !== 'all') {
                filtered = filtered.filter(v => v.category === currentVideoCategory);
            }
            
            const container = document.getElementById('videos-grid');
            
            if (filtered.length === 0) {
                container.innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: 4rem; color: var(--gray);">
                        <h3 style="font-size: 2rem; margin-bottom: 1rem;">üòï</h3>
                        <p>Nenhum v√≠deo encontrado com estes filtros.</p>
                        <p style="margin-top: 0.5rem;">Tente outra combina√ß√£o!</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = filtered.map(video => `
                <div class="video-card" onclick="playVideo(${video.id})">
                    <div class="video-thumbnail">
                        <div style="font-size: 4rem;">${video.thumbnail}</div>
                        <div class="video-play-icon">‚ñ∂</div>
                        <div class="video-duration">${video.duration}</div>
                    </div>
                    <div class="video-info">
                        <div class="video-title">${video.title}</div>
                        <p style="color: var(--gray); font-size: 0.9rem; margin-top: 0.5rem; line-height: 1.4;">${video.description}</p>
                        <div class="video-meta">
                            <span class="video-level">${video.level}</span>
                            <span style="color: var(--gray);">‚è±Ô∏è ${video.duration}</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Audio Filters
        let currentAudioLevel = 'all';

        function filterAudioByLevel(level) {
            currentAudioLevel = level;
            document.querySelectorAll('.video-filters button').forEach(btn => {
                if (btn.onclick && btn.onclick.toString().includes('filterAudioByLevel')) {
                    btn.classList.remove('active');
                }
            });
            event.target.classList.add('active');
            loadAudioExercisesFiltered();
        }

        function loadAudioExercisesFiltered() {
            let filtered = audioExercises;
            
            if (currentAudioLevel !== 'all') {
                filtered = filtered.filter(ex => ex.level === currentAudioLevel);
            }
            
            const container = document.getElementById('audio-exercises');
            
            if (filtered.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 4rem; color: var(--gray);">
                        <h3 style="font-size: 2rem; margin-bottom: 1rem;">üòï</h3>
                        <p>Nenhum exerc√≠cio encontrado neste n√≠vel.</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = filtered.map((exercise, idx) => {
                const realIdx = audioExercises.findIndex(ex => ex.id === exercise.id);
                return `
                <div class="audio-exercise">
                    <div class="audio-header">
                        <div class="audio-title">üéß ${exercise.title}</div>
                        <div class="audio-level-badge">${exercise.level}</div>
                    </div>
                    
                    <div class="audio-player">
                        <div class="audio-controls">
                            <button class="audio-btn" onclick="playAudio(${realIdx})" title="Reproducir">
                                ‚ñ∂Ô∏è
                            </button>
                            <button class="audio-btn" onclick="toggleTranscript(${realIdx})" title="Ver texto">
                                üìÑ
                            </button>
                        </div>
                        <div class="audio-text" id="transcript-${realIdx}">
                            <strong>Transcripci√≥n:</strong><br>
                            ${exercise.audioText}
                        </div>
                    </div>
                    
                    <div class="audio-questions">
                        ${exercise.questions.map((q, qIdx) => `
                            <div class="audio-question">
                                <div class="audio-question-text">${qIdx + 1}. ${q.question}</div>
                                <div class="options">
                                    ${q.options.map((opt, optIdx) => `
                                        <div class="option" onclick="selectAudioOption(${realIdx}, ${qIdx}, ${optIdx})" 
                                             data-exercise="${realIdx}" data-question="${qIdx}" data-option="${optIdx}">
                                            <div class="option-letter">${String.fromCharCode(65 + optIdx)}</div>
                                            <div>${opt}</div>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        `).join('')}
                        <button class="submit-answer" onclick="checkAudioAnswers(${realIdx})">
                            Verificar Respostas
                        </button>
                    </div>
                </div>
            `}).join('');
        }
    </script>
</body>
</html>
