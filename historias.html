<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hist√≥rias Interativas - Espa√±olPro</title>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Work+Sans:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #FF6B35;
            --secondary: #F7931E;
            --accent: #FEC601;
            --dark: #1A1A2E;
            --darker: #0F0F1E;
            --light: #FFFFFF;
            --gray: #9E9E9E;
            --success: #4CAF50;
            --gradient-main: linear-gradient(135deg, #FF6B35 0%, #F7931E 50%, #FEC601 100%);
        }

        body {
            font-family: 'Work Sans', sans-serif;
            background: var(--darker);
            color: var(--light);
            min-height: 100vh;
        }

        header {
            background: rgba(26, 26, 46, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 2px solid var(--primary);
            padding: 1.5rem 2rem;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-family: 'Bebas Neue', cursive;
            font-size: 2rem;
            background: var(--gradient-main);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 2px;
        }

        .back-btn {
            padding: 0.8rem 1.5rem;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--primary);
            border-radius: 8px;
            color: var(--light);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
        }

        .back-btn:hover {
            background: var(--primary);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .welcome {
            text-align: center;
            margin-bottom: 3rem;
        }

        .welcome h1 {
            font-family: 'Bebas Neue', cursive;
            font-size: 3rem;
            margin-bottom: 1rem;
            letter-spacing: 2px;
        }

        /* Stories Grid */
        .stories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .story-card {
            background: var(--dark);
            border-radius: 20px;
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s;
            cursor: pointer;
        }

        .story-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
        }

        .story-header {
            padding: 2rem;
            background: var(--gradient-main);
            text-align: center;
        }

        .story-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .story-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--darker);
            margin-bottom: 0.5rem;
        }

        .story-level {
            background: rgba(15, 15, 30, 0.3);
            padding: 0.3rem 0.8rem;
            border-radius: 12px;
            font-size: 0.9rem;
            color: var(--darker);
            font-weight: 600;
        }

        .story-body {
            padding: 1.5rem;
        }

        .story-meta {
            display: flex;
            justify-content: space-between;
            color: var(--gray);
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .story-description {
            color: var(--gray);
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .start-story-btn {
            width: 100%;
            padding: 1rem;
            background: var(--gradient-main);
            border: none;
            border-radius: 12px;
            color: var(--darker);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }

        .start-story-btn:hover {
            transform: scale(1.02);
        }

        /* Story Reader */
        .story-reader {
            display: none;
            max-width: 800px;
            margin: 0 auto;
        }

        .story-reader.active {
            display: block;
        }

        .story-content {
            background: var(--dark);
            padding: 3rem;
            border-radius: 20px;
            border: 2px solid rgba(255, 107, 53, 0.2);
            line-height: 2;
            font-size: 1.2rem;
            margin-bottom: 2rem;
        }

        .story-content p {
            margin-bottom: 1.5rem;
        }

        .highlight-word {
            background: rgba(255, 193, 7, 0.2);
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            cursor: help;
            position: relative;
        }

        .highlight-word:hover::after {
            content: attr(data-translation);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--darker);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            white-space: nowrap;
            font-size: 0.9rem;
            border: 1px solid var(--accent);
        }

        .comprehension-questions {
            background: var(--dark);
            padding: 2rem;
            border-radius: 20px;
            border: 2px solid rgba(255, 255, 255, 0.05);
        }

        .question {
            margin-bottom: 2rem;
        }

        .question-text {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }

        .option {
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid transparent;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .option:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--primary);
        }

        .option.selected {
            border-color: var(--accent);
            background: rgba(254, 198, 1, 0.1);
        }

        .option.correct {
            border-color: var(--success);
            background: rgba(76, 175, 80, 0.1);
        }

        .option.incorrect {
            border-color: #F44336;
            background: rgba(244, 67, 54, 0.1);
        }

        .submit-btn {
            width: 100%;
            padding: 1rem;
            background: var(--gradient-main);
            border: none;
            border-radius: 12px;
            color: var(--darker);
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            margin-top: 1.5rem;
        }

        .back-to-stories {
            display: block;
            text-align: center;
            margin-top: 2rem;
            padding: 1rem;
            background: transparent;
            border: 2px solid var(--primary);
            border-radius: 12px;
            color: var(--light);
            text-decoration: none;
            font-weight: 600;
        }

        .filters {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 0.8rem 1.5rem;
            background: var(--dark);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: var(--light);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .filter-btn:hover, .filter-btn.active {
            background: var(--gradient-main);
            color: var(--darker);
            border-color: transparent;
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo">ESPA√ëOLPRO</div>
            <a href="dashboard.html" class="back-btn">‚Üê Voltar ao Dashboard</a>
        </div>
    </header>

    <main class="container">
        <div id="stories-list">
            <div class="welcome">
                <h1>Hist√≥rias Interativas üìñ</h1>
                <p style="color: var(--gray); font-size: 1.2rem;">Aprenda espanhol atrav√©s de hist√≥rias envolventes</p>
            </div>

            <div class="filters">
                <button class="filter-btn active" onclick="filterStories('all')">Todas</button>
                <button class="filter-btn" onclick="filterStories('A2')">A2 - B√°sico</button>
                <button class="filter-btn" onclick="filterStories('B1')">B1 - Intermedi√°rio</button>
                <button class="filter-btn" onclick="filterStories('B1_plus')">B1+ - Inter. Avan√ßado</button>
                <button class="filter-btn" onclick="filterStories('B2')">B2 - Avan√ßado</button>
            </div>

            <div class="stories-grid" id="stories-grid">
                <!-- Stories will be loaded here -->
            </div>
        </div>

        <div class="story-reader" id="story-reader">
            <!-- Story content will be loaded here -->
        </div>
    </main>

    <script>
        const stories = [
            {
                id: 1,
                level: 'A2',
                title: 'Un D√≠a en Barcelona',
                icon: 'üèñÔ∏è',
                duration: '5 min',
                words: 250,
                description: 'Mar√≠a visita Barcelona pela primeira vez e descobre a cidade.',
                content: `
                    <p>Mar√≠a <span class="highlight-word" data-translation="chegou">lleg√≥</span> a Barcelona por primera vez. El <span class="highlight-word" data-translation="sol">sol</span> brillaba y hac√≠a calor.</p>
                    <p>Primero, fue a la <span class="highlight-word" data-translation="praia">playa</span> de la Barceloneta. El agua estaba fr√≠a pero muy limpia. Muchas personas tomaban el sol y jugaban en la arena.</p>
                    <p>Despu√©s, camin√≥ por Las Ramblas. Hab√≠a muchas tiendas y restaurantes. Mar√≠a compr√≥ un helado de chocolate y se sent√≥ en un banco.</p>
                    <p>Al final del d√≠a, visit√≥ la Sagrada Familia. La iglesia era incre√≠ble. Mar√≠a sac√≥ muchas <span class="highlight-word" data-translation="fotos">fotos</span>.</p>
                    <p>Barcelona le gust√≥ mucho. Decidi√≥ volver el pr√≥ximo a√±o.</p>
                `,
                questions: [
                    {
                        question: '¬øQu√© tiempo hac√≠a cuando Mar√≠a lleg√≥?',
                        options: ['Llov√≠a', 'Hac√≠a sol y calor', 'Hac√≠a fr√≠o', 'Estaba nublado'],
                        correct: 1
                    },
                    {
                        question: '¬øQu√© compr√≥ Mar√≠a en Las Ramblas?',
                        options: ['Una camiseta', 'Un helado', 'Un libro', 'Un sombrero'],
                        correct: 1
                    },
                    {
                        question: '¬øQu√© visit√≥ al final del d√≠a?',
                        options: ['La playa', 'Un museo', 'La Sagrada Familia', 'Un parque'],
                        correct: 2
                    }
                ]
            },
            {
                id: 2,
                level: 'A2',
                title: 'La Fiesta de Cumplea√±os',
                icon: 'üéÇ',
                duration: '6 min',
                words: 280,
                description: 'Carlos organiza una fiesta sorpresa para su mejor amigo.',
                content: `
                    <p>Era el <span class="highlight-word" data-translation="anivers√°rio">cumplea√±os</span> de Pedro, el mejor amigo de Carlos. Carlos quer√≠a hacer una fiesta sorpresa.</p>
                    <p>Carlos invit√≥ a todos los amigos de Pedro. Compr√≥ <span class="highlight-word" data-translation="bolos">pasteles</span>, bebidas y decoraciones.</p>
                    <p>El s√°bado por la noche, todos los amigos llegaron a la casa de Carlos. Apagaron las luces y esperaron en silencio.</p>
                    <p>Cuando Pedro entr√≥, todos gritaron: "¬°<span class="highlight-word" data-translation="surpresa">Sorpresa</span>!". Pedro estaba muy contento y emocionado.</p>
                    <p>Bailaron, comieron y se divirtieron toda la noche. Pedro dijo que era la mejor fiesta de su vida.</p>
                `,
                questions: [
                    {
                        question: '¬øQu√© tipo de fiesta organiz√≥ Carlos?',
                        options: ['Una fiesta normal', 'Una fiesta sorpresa', 'Una fiesta en la playa', 'Una fiesta de disfraces'],
                        correct: 1
                    },
                    {
                        question: '¬øQu√© hicieron los amigos cuando Pedro entr√≥?',
                        options: ['Cantaron', 'Gritaron "Sorpresa"', 'Se escondieron', 'Salieron'],
                        correct: 1
                    }
                ]
            },
            {
                id: 3,
                level: 'B1',
                title: 'El Nuevo Trabajo',
                icon: 'üíº',
                duration: '8 min',
                words: 400,
                description: 'Ana empieza su nuevo trabajo en una empresa internacional.',
                content: `
                    <p>Ana estaba <span class="highlight-word" data-translation="nervosa">nerviosa</span>. Era su primer d√≠a en la nueva empresa. Hab√≠a estudiado mucho para conseguir este trabajo.</p>
                    <p>Cuando lleg√≥ a la oficina, el gerente la recibi√≥ con una sonrisa. "Bienvenida al equipo", le dijo. Le present√≥ a todos sus nuevos <span class="highlight-word" data-translation="colegas">compa√±eros</span>.</p>
                    <p>Su escritorio estaba junto a la ventana. Pod√≠a ver toda la ciudad desde all√≠. Ana pens√≥ que era un buen comienzo.</p>
                    <p>Durante la primera semana, tuvo que aprender muchas cosas nuevas. El sistema inform√°tico era diferente al que conoc√≠a. Sin embargo, sus compa√±eros la ayudaron mucho.</p>
                    <p>Al final del mes, Ana se sent√≠a m√°s <span class="highlight-word" data-translation="confiante">segura</span>. Hab√≠a hecho varios amigos y le gustaba su trabajo. Estaba contenta de haber tomado la decisi√≥n de cambiar de empresa.</p>
                `,
                questions: [
                    {
                        question: '¬øC√≥mo se sent√≠a Ana el primer d√≠a?',
                        options: ['Feliz', 'Nerviosa', 'Triste', 'Enojada'],
                        correct: 1
                    },
                    {
                        question: '¬øD√≥nde estaba su escritorio?',
                        options: ['Junto a la puerta', 'En el centro', 'Junto a la ventana', 'En un rinc√≥n'],
                        correct: 2
                    },
                    {
                        question: '¬øC√≥mo se sent√≠a al final del mes?',
                        options: ['Confundida', 'M√°s segura', 'Desilusionada', 'Aburrida'],
                        correct: 1
                    }
                ]
            },
            {
                id: 4,
                level: 'B1',
                title: 'Perdidos en Madrid',
                icon: 'üó∫Ô∏è',
                duration: '10 min',
                words: 450,
                description: 'Dos turistas se pierden en Madrid y viven una aventura inesperada.',
                content: `
                    <p>Juan y Laura eran turistas brasile√±os visitando Madrid. Hab√≠an <span class="highlight-word" data-translation="planejado">planeado</span> su viaje durante meses.</p>
                    <p>El segundo d√≠a, decidieron explorar el barrio de Malasa√±a sin un mapa. "Ser√° una aventura", dijo Juan con confianza.</p>
                    <p>Despu√©s de dos horas caminando, se dieron cuenta de que estaban completamente perdidos. Sus tel√©fonos no ten√≠an bater√≠a.</p>
                    <p>"<span class="highlight-word" data-translation="Dev√≠amos">Deber√≠amos</span> haber tra√≠do el mapa en papel", se quej√≥ Laura. Juan estuvo de acuerdo.</p>
                    <p>Finalmente, entraron en un peque√±o caf√© para pedir ayuda. El due√±o, un se√±or amable llamado Antonio, les ofreci√≥ caf√© gratis y les explic√≥ c√≥mo volver al hotel.</p>
                    <p>Pero Antonio les sugiri√≥ algo mejor: "Si no tienen prisa, puedo mostrarles los lugares m√°s bonitos del barrio. Los turistas nunca los conocen."</p>
                    <p>Juan y Laura aceptaron encantados. Antonio les mostr√≥ calles hist√≥ricas, tiendas escondidas y el mejor restaurante de tapas de Madrid.</p>
                    <p>Al final del d√≠a, Juan y Laura agradecieron a Antonio. "Perdernos fue la mejor parte del viaje", rieron.</p>
                `,
                questions: [
                    {
                        question: '¬øPor qu√© se perdieron Juan y Laura?',
                        options: ['No hablaban espa√±ol', 'No llevaban mapa', 'Era de noche', 'Llov√≠a mucho'],
                        correct: 1
                    },
                    {
                        question: '¬øQui√©n les ayud√≥?',
                        options: ['Un polic√≠a', 'Antonio, due√±o de un caf√©', 'Otro turista', 'Un taxista'],
                        correct: 1
                    },
                    {
                        question: '¬øQu√© les ofreci√≥ Antonio?',
                        options: ['Solo direcciones', 'Mostrarles el barrio', 'Llamar un taxi', 'Prestarles dinero'],
                        correct: 1
                    }
                ]
            },
            {
                id: 5,
                level: 'B1_plus',
                title: 'La Entrevista',
                icon: 'üëî',
                duration: '12 min',
                words: 550,
                description: 'Roberto se prepara para la entrevista de trabajo m√°s importante de su vida.',
                content: `
                    <p>Roberto hab√≠a enviado su <span class="highlight-word" data-translation="curr√≠culo">curr√≠culum</span> a m√°s de veinte empresas. Finalmente, recibi√≥ una llamada de la empresa de sus sue√±os.</p>
                    <p>"¬øPodr√≠a venir a una entrevista el pr√≥ximo martes a las diez?", le pregunt√≥ la voz al tel√©fono. Roberto casi no pod√≠a creer su suerte.</p>
                    <p>Durante los siguientes d√≠as, se prepar√≥ intensamente. Investig√≥ sobre la empresa, practic√≥ respuestas a preguntas comunes y eligi√≥ su mejor traje.</p>
                    <p>La noche anterior, apenas pudo <span class="highlight-word" data-translation="dormir">dormir</span>. Su mente no dejaba de repasar todo lo que hab√≠a estudiado.</p>
                    <p>El martes lleg√≥ temprano. La recepcionista le pidi√≥ que esperara. Mientras esperaba, observ√≥ la oficina. Todo era moderno e impresionante.</p>
                    <p>"Se√±or Rodr√≠guez, puede pasar", dijo finalmente la recepcionista. Roberto respir√≥ profundo y entr√≥.</p>
                    <p>La entrevistadora, la Se√±ora Mart√≠nez, era una mujer de unos cincuenta a√±os con una sonrisa amable. "Cu√©nteme sobre usted", comenz√≥.</p>
                    <p>Roberto habl√≥ sobre su experiencia, sus estudios y sus objetivos. Aunque estaba nervioso, logr√≥ mantener la calma.</p>
                    <p>La entrevistadora le hizo preguntas dif√≠ciles sobre situaciones hipot√©ticas. Roberto respondi√≥ lo mejor que pudo, usando ejemplos de su experiencia anterior.</p>
                    <p>"Si pudiera cambiar algo de su √∫ltimo trabajo, ¬øqu√© ser√≠a?", pregunt√≥ ella. Roberto pens√≥ cuidadosamente antes de responder.</p>
                    <p>Despu√©s de cuarenta y cinco minutos, la entrevista termin√≥. "Le llamaremos en una semana", dijo la Se√±ora Mart√≠nez.</p>
                    <p>Roberto sali√≥ de la oficina sin saber si lo hab√≠a hecho bien o mal. Solo el tiempo lo dir√≠a.</p>
                `,
                questions: [
                    {
                        question: '¬øA cu√°ntas empresas envi√≥ Roberto su curr√≠culum?',
                        options: ['Diez', 'Quince', 'Veinte', 'M√°s de veinte'],
                        correct: 3
                    },
                    {
                        question: '¬øC√≥mo se prepar√≥ Roberto para la entrevista?',
                        options: ['No se prepar√≥', 'Solo eligi√≥ su traje', 'Investig√≥ y practic√≥ respuestas', 'Pidi√≥ ayuda a amigos'],
                        correct: 2
                    },
                    {
                        question: '¬øCu√°nto dur√≥ la entrevista?',
                        options: ['15 minutos', '30 minutos', '45 minutos', '1 hora'],
                        correct: 2
                    }
                ]
            },
            {
                id: 6,
                level: 'B2',
                title: 'El Dilema √âtico',
                icon: '‚öñÔ∏è',
                duration: '15 min',
                words: 700,
                description: 'Una periodista descubre informaci√≥n comprometedora sobre un pol√≠tico.',
                content: `
                    <p>Carmen era una periodista de <span class="highlight-word" data-translation="investiga√ß√£o">investigaci√≥n</span> reconocida. Llevaba meses investigando casos de corrupci√≥n en el gobierno local.</p>
                    <p>Un d√≠a, recibi√≥ un sobre an√≥nimo con documentos que compromet√≠an a un pol√≠tico importante. Las pruebas eran <span class="highlight-word" data-translation="contundentes">contundentes</span>: desv√≠o de fondos p√∫blicos, contratos fraudulentos y sobornos.</p>
                    <p>Sin embargo, hab√≠a un problema. El pol√≠tico en cuesti√≥n, el alcalde Fern√°ndez, hab√≠a sido fundamental en la aprobaci√≥n de un proyecto social que beneficiaba a miles de familias necesitadas. Si se publicaba el esc√°ndalo, el proyecto se cancelar√≠a inmediatamente.</p>
                    <p>Carmen se enfrentaba a un <span class="highlight-word" data-translation="dilema">dilema</span> √©tico: ¬ødeb√≠a publicar la verdad, aunque eso perjudicara a familias inocentes, o callar y permitir que la corrupci√≥n continuara?</p>
                    <p>Consult√≥ con su editor, Javier, quien le dijo: "Nuestro deber es informar. La verdad siempre debe salir a la luz, independientemente de las consecuencias."</p>
                    <p>Pero Carmen no estaba segura. Pens√≥ en las familias que perder√≠an sus casas si el proyecto se cancelaba. Pens√≥ en su responsabilidad como periodista. Pas√≥ noches sin dormir, <span class="highlight-word" data-translation="pesando">sopesando</span> ambas opciones.</p>
                    <p>Finalmente, tom√≥ una decisi√≥n. Publicar√≠a la informaci√≥n, pero tambi√©n escribir√≠a un art√≠culo complementario explicando el impacto del proyecto social y proponiendo alternativas para continuarlo bajo supervisi√≥n transparente.</p>
                    <p>El art√≠culo caus√≥ un gran <span class="highlight-word" data-translation="impacto">revuelo</span>. El alcalde Fern√°ndez renunci√≥, pero la presi√≥n p√∫blica logr√≥ que el proyecto social continuara con nueva administraci√≥n.</p>
                    <p>Carmen recibi√≥ cr√≠ticas de ambos lados: algunos la acusaban de haber tardado demasiado, otros de haber arruinado la carrera de un pol√≠tico efectivo.</p>
                    <p>Meses despu√©s, reflexionando sobre su decisi√≥n, Carmen escribi√≥ en su diario: "No hay decisiones f√°ciles en el periodismo √©tico. Solo podemos aspirar a hacer lo que consideramos correcto y asumir las consecuencias."</p>
                `,
                questions: [
                    {
                        question: '¬øCu√°l era el dilema de Carmen?',
                        options: [
                            'Elegir entre dos trabajos',
                            'Publicar la verdad vs. proteger un proyecto social',
                            'Renunciar o continuar',
                            'Viajar o quedarse'
                        ],
                        correct: 1
                    },
                    {
                        question: '¬øQu√© decidi√≥ hacer Carmen finalmente?',
                        options: [
                            'No publicar nada',
                            'Publicar sin contexto',
                            'Publicar con art√≠culo complementario',
                            'Enviar documentos a otro periodista'
                        ],
                        correct: 2
                    },
                    {
                        question: '¬øCu√°l fue el resultado de la publicaci√≥n?',
                        options: [
                            'Todo se cancel√≥',
                            'El alcalde continu√≥ y el proyecto tambi√©n',
                            'El alcalde renunci√≥ pero el proyecto continu√≥',
                            'Nada cambi√≥'
                        ],
                        correct: 2
                    }
                ]
            }
        ];

        let currentStory = null;
        let currentLevel = 'all';

        function loadStories() {
            const filtered = currentLevel === 'all' 
                ? stories 
                : stories.filter(s => s.level === currentLevel);

            const grid = document.getElementById('stories-grid');
            grid.innerHTML = filtered.map(story => `
                <div class="story-card" onclick="openStory(${story.id})">
                    <div class="story-header">
                        <div class="story-icon">${story.icon}</div>
                        <div class="story-title">${story.title}</div>
                        <div class="story-level">${story.level}</div>
                    </div>
                    <div class="story-body">
                        <div class="story-meta">
                            <span>‚è±Ô∏è ${story.duration}</span>
                            <span>üìù ${story.words} palavras</span>
                        </div>
                        <div class="story-description">${story.description}</div>
                        <button class="start-story-btn">Ler Hist√≥ria</button>
                    </div>
                </div>
            `).join('');
        }

        function filterStories(level) {
            currentLevel = level;
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            loadStories();
        }

        function openStory(storyId) {
            currentStory = stories.find(s => s.id === storyId);
            const reader = document.getElementById('story-reader');
            
            reader.innerHTML = `
                <div style="text-align: center; margin-bottom: 2rem;">
                    <div style="font-size: 4rem; margin-bottom: 1rem;">${currentStory.icon}</div>
                    <h2 style="font-family: 'Bebas Neue', cursive; font-size: 2.5rem; letter-spacing: 2px;">${currentStory.title}</h2>
                    <div style="color: var(--gray); margin-top: 0.5rem;">
                        <span>${currentStory.level}</span> ‚Ä¢ 
                        <span>${currentStory.duration}</span> ‚Ä¢ 
                        <span>${currentStory.words} palavras</span>
                    </div>
                </div>

                <div class="story-content">
                    ${currentStory.content}
                </div>

                <div class="comprehension-questions">
                    <h3 style="font-family: 'Bebas Neue'; font-size: 2rem; margin-bottom: 1.5rem; letter-spacing: 1px;">Compreens√£o üß†</h3>
                    ${currentStory.questions.map((q, idx) => `
                        <div class="question">
                            <div class="question-text">${idx + 1}. ${q.question}</div>
                            <div class="options">
                                ${q.options.map((opt, optIdx) => `
                                    <div class="option" onclick="selectOption(${idx}, ${optIdx})" data-question="${idx}" data-option="${optIdx}">
                                        ${String.fromCharCode(65 + optIdx)}. ${opt}
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `).join('')}
                    <button class="submit-btn" onclick="checkAnswers()">Verificar Respostas</button>
                </div>

                <a href="#" class="back-to-stories" onclick="backToStories()">‚Üê Voltar √†s Hist√≥rias</a>
            `;

            document.getElementById('stories-list').style.display = 'none';
            reader.classList.add('active');
            window.scrollTo(0, 0);
        }

        function selectOption(questionIdx, optionIdx) {
            // Clear previous selections for this question
            document.querySelectorAll(`[data-question="${questionIdx}"]`).forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // Select new option
            document.querySelector(`[data-question="${questionIdx}"][data-option="${optionIdx}"]`).classList.add('selected');
        }

        function checkAnswers() {
            let correct = 0;
            
            currentStory.questions.forEach((q, idx) => {
                const selected = document.querySelector(`[data-question="${idx}"].selected`);
                
                if (selected) {
                    const optionIdx = parseInt(selected.dataset.option);
                    const correctOption = document.querySelector(`[data-question="${idx}"][data-option="${q.correct}"]`);
                    
                    correctOption.classList.add('correct');
                    
                    if (optionIdx === q.correct) {
                        correct++;
                    } else {
                        selected.classList.add('incorrect');
                    }
                }
            });

            const percentage = Math.round((correct / currentStory.questions.length) * 100);
            alert(`Resultado: ${correct}/${currentStory.questions.length} corretas (${percentage}%)\n\n${percentage >= 70 ? '¬°Excelente comprensi√≥n! üéâ' : '¬°Sigue practicando! üí™'}`);
        }

        function backToStories() {
            document.getElementById('stories-list').style.display = 'block';
            document.getElementById('story-reader').classList.remove('active');
            window.scrollTo(0, 0);
        }

        // Initialize
        loadStories();
    </script>
</body>
</html>